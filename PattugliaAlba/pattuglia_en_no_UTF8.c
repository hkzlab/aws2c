/* File generated by aws2c */

#include<stdlib.h>
#include"config.h"

#include"aws.h"

#include"inout.h"
#include"systemd.h"

extern unsigned int verb;
extern unsigned int noun1;
extern unsigned int noun2;
extern ADVERBTYPE adve;
extern ACTORTYPE actor;
extern ADJECTIVETYPE adjective;
unsigned int dummy;
EFFSHORTINDEX cdummy;
#define CARRIED 1500
#define WEARED 1600
room *cr;

char *compressed;
unsigned char bpointer;
unsigned int cpointer;
char decompress_b[B_SIZE+1];
unsigned char currbyte;

#define NUM_NODES 127
const tree huftree[NUM_NODES]={
    {45,255,255},
    {50,255,255},
    {255,0,1},
    {52,255,255},
    {56,255,255},
    {255,3,4},
    {57,255,255},
    {66,255,255},
    {255,6,7},
    {71,255,255},
    {75,255,255},
    {255,9,10},
    {90,255,255},
    {113,255,255},
    {255,12,13},
    {120,255,255},
    {122,255,255},
    {255,15,16},
    {255,17,14},
    {255,11,8},
    {255,5,2},
    {48,255,255},
    {49,255,255},
    {255,21,22},
    {76,255,255},
    {77,255,255},
    {255,24,25},
    {67,255,255},
    {70,255,255},
    {255,27,28},
    {80,255,255},
    {255,30,26},
    {255,23,20},
    {255,19,18},
    {106,255,255},
    {85,255,255},
    {255,34,35},
    {34,255,255},
    {255,29,37},
    {72,255,255},
    {78,255,255},
    {255,39,40},
    {87,255,255},
    {255,42,31},
    {58,255,255},
    {63,255,255},
    {255,44,45},
    {69,255,255},
    {255,47,33},
    {68,255,255},
    {255,32,49},
    {255,36,41},
    {255,38,43},
    {83,255,255},
    {107,255,255},
    {255,53,54},
    {118,255,255},
    {255,56,46},
    {33,255,255},
    {82,255,255},
    {255,58,59},
    {65,255,255},
    {255,48,61},
    {44,255,255},
    {255,50,63},
    {79,255,255},
    {89,255,255},
    {255,65,66},
    {39,255,255},
    {255,51,68},
    {98,255,255},
    {255,70,52},
    {255,55,57},
    {255,60,62},
    {73,255,255},
    {255,74,64},
    {84,255,255},
    {255,76,67},
    {102,255,255},
    {255,78,69},
    {112,255,255},
    {119,255,255},
    {255,80,81},
    {103,255,255},
    {255,71,83},
    {109,255,255},
    {255,72,85},
    {121,255,255},
    {255,73,87},
    {46,255,255},
    {255,75,89},
    {99,255,255},
    {255,91,77},
    {117,255,255},
    {255,93,79},
    {108,255,255},
    {255,95,82},
    {0,255,255},
    {255,97,84},
    {100,255,255},
    {255,86,99},
    {255,88,90},
    {105,255,255},
    {255,102,92},
    {104,255,255},
    {255,94,104},
    {115,255,255},
    {255,96,106},
    {110,255,255},
    {114,255,255},
    {255,108,109},
    {255,98,100},
    {97,255,255},
    {255,112,101},
    {116,255,255},
    {111,255,255},
    {255,114,115},
    {101,255,255},
    {255,103,117},
    {255,105,107},
    {255,110,111},
    {255,113,116},
    {32,255,255},
    {255,118,122},
    {255,119,120},
    {255,121,123},
    {255,124,125},
};

#ifndef INTERNAL_DEF
EFFSHORTINDEX iii;
#endif
char hufget(void)
{
#ifdef INTERNAL_DEF
EFFSHORTINDEX iii;
#endif
    iii=NUM_NODES-1;
    while(1) {
        if(currbyte&0x1) {
            iii=huftree[iii].son1idx;
        } else {
            iii=huftree[iii].son0idx;
        }
        if(++bpointer==8) {
            bpointer=0;
            currbyte=compressed[++cpointer];
        } else {
            currbyte>>=1;
        }
        if(huftree[iii].c!=255)
            return huftree[iii].c;
    }
}

boolean decode(void)
{
    register char c;
    EFFSHORTINDEX k=0;
    if(bpointer==0)
       currbyte=compressed[cpointer];
    do {
        c=hufget();
        SHIFTPETSCII;
        decompress_b[k++]=c;
    } while(c!='\0'&&!(c==' '&&k>B_SIZE-15)&&k<B_SIZE);
    if(c!='\0') {
        decompress_b[k]='\0';
        return true;
    }
    return false;
}
const word dictionary[DSIZE]={
    {0x54, 0x4f, 0x0,150,0},
    {0xfb, 0xe3, 0x47,37,1},
    {0x55, 0x50, 0x0,84,1},
    {0xfe, 0x50, 0x45,112,1},
    {0x5e, 0xf6, 0xe1,61,2},
    {0xf5, 0x4f, 0x57,85,1},
    {0xfc, 0x54, 0x4f,40,1},
    {0x55, 0xfa, 0xfc,6,2},
    {0xee, 0xf1, 0xf9,989,1},
    {0xe8, 0x49, 0x44,100,1},
    {0xe4, 0xf4, 0x52,7,2},
    {0xfe, 0xf8, 0xf4,36,1},
    {0xef, 0xf7, 0x4f,113,1},
    {0xf5, 0xf8, 0x41,3,2},
    {0x45, 0x0, 0x0,82,1},
    {0xfa, 0xfe, 0xe5,2,2},
    {0xff, 0xe2, 0x54,31,1},
    {0x4d, 0xef, 0xf2,70,1},
    {0xee, 0x41, 0x53,82,1},
    {0xea, 0x4f, 0x4b,36,1},
    {0xfc, 0x49, 0x52,60,2},
    {0x44, 0x0, 0x0,110,1},
    {0xf5, 0x4f, 0x57,85,1},
    {0xf8, 0x4f, 0x4f,110,1},
    {0x49, 0x0, 0x0,72,2},
    {0xfa, 0x45, 0x41,115,1},
    {0xef, 0xe1, 0x49,39,1},
    {0xf3, 0xe2, 0xfa,39,1},
    {0x43, 0x52, 0x5b,72,2},
    {0xe5, 0xfe, 0x41,55,1},
    {0xe9, 0x45, 0x41,70,1},
    {0x50, 0x55, 0x54,39,1},
    {0xe8, 0x49, 0x44,100,1},
    {0xfb, 0x48, 0x4f,74,1},
    {0x4e, 0x0, 0x0,80,1},
    {0xf5, 0x4f, 0x52,80,1},
    {0x57, 0x0, 0x0,83,1},
    {0xfc, 0x45, 0x53,83,1},
    {0xed, 0xfd, 0x52,59,2},
    {0xfe, 0xf3, 0x4e,58,2},
    {0xfa, 0x52, 0x41,50,1},
    {0xe5, 0x48, 0x45,9999,3},
    {0xe9, 0x4f, 0x4f,114,2},
    {0xe5, 0xfe, 0x41,55,1},
    {0xee, 0x41, 0x4b,50,1},
    {0xe5, 0x48, 0x45,9999,3},
    {0x52, 0xfa, 0xfc,987,1},
    {0x53, 0x0, 0x0,81,1},
    {0xf1, 0xf0, 0x49,101,1},
    {0xe9, 0x41, 0x56,988,1},
    {0xe8, 0xf3, 0xfc,5,2},
    {0xf5, 0x4f, 0x57,75,0},
    {0xfe, 0xed, 0x4f,4,2},
    {0xe5, 0x55, 0x52,38,1},
    {0x55, 0x50, 0x0,84,1},
    {0xf8, 0xf9, 0x55,81,1},
    {0xe8, 0xf9, 0x52,1,2},
    {0x47, 0x4f, 0x0,100,1}
};

const char long_d1[]={0x99,0x87,0xFB,0x21,0x2F,0xDC,0x4F,0xC1,0x45,0x16,0xCE,0x9F,0x1A,0x68,0xA5,0xA1,0x3E,0xFF,0xC,0xF7,0x5C,0x61,
0x21,0xCB,0xF,0xDD,0x47,0x7D,0x83,0xEB,0x21,0xFE,0x21,0xF,0x9D,0x90,0x8E,0xF4,0x64,0xC3,0xF3,0xAB,
0x5F,0xB8,0xA7,0x97,0xEB,0x54,0x30,0xF,0xB1,0xF,0xC4,0xAF,0xBE,0x70,0x6F,0x83,0x50,0x7F,0xAA,0xB9,0xF2,0xCF,
0xC9,0xB,0xF7,0xD2,0x5A,0x98,0xFD,0x38,0x44,0x86,0x8D,0xF5,0x86,0xCE,0x15,0x43,0xF9,0xF6,0x16,0x1F,0x50,
0xAF,0xA6,0x43,0x3D,0xBF,0x70,0x3F,0x5,0x17,0x59,0x38,0x7F,0xA5,0x34,0x64,0xDA,0xFC,0x33,0xDC,0x87,0xBA,0xAD,
0xE9,0x7D,0xB7,0x7E,0xF0,0xAB,0x5F,0xB8,0xE7,0x6,0x85,0xB9,0x1};
const char short_d1[]={0x56,0xCC,0xC1,0x4C,0x9C,0xCD,0x27,0x27,0x66,0x35,};
const char long_d2[]={0x33,0xDC,0x87,0xBA,0xAD,0xE9,0x7,0x3F,0x3E,0x35,0xF1,0xF,0xF1,0xF7,0xA1,0x8E,0x9F,0x30,0x5C,0xCB,0x6A,0xFE,
0x4C,0x7D,0x6A,0xA9,0x18,0xC2,0xF,0x42,0xEE,0x38,0xC4,0xF3,0x1B,0x3A,0xBD,0x41,0xB5,0x70,0xF6,0xB9,0x5A,0xD7,
0xBF,0xE5,0x74,0x10,0x72,0x8D,0xC9,0x91,0xF3,0xCF,0x70,0x75,0x3F,0xF8,0x71,0xDF,0xAD,0xAF,0x7E,0xE1,0x5E,
0x5A,0xB,0x73,0x3};
const char short_d2[]={0xC9,0x89,0xD6,0x9F,0x4B,0x9C,0x37,};
const char long_d3[]={0x99,0x87,0xFB,0x21,0x2F,0xDC,0x4F,0xC1,0x45,0x16,0xCE,0xE7,0xA,0xB,0x59,0xCE,0xF,0x53,0xFC,0xEA,0xDD,0xF4,
0xD0,0x6E,0xBD,0x70,0x75,0x3F,0xF8,0x71,0x12,0xE9,0xEA,0x1B,0x3A,0xA4,0xCB,0x78,0x2E,0xD,0x3A,0x7F,0xB2,
0xBC,0xA9,0x95,0x21,0xF6,0xC9,0x86,0xE7,0x57,0xBF,0x70,0xBF,0xC1,0x95,0xFD,0x6A,0x3A,0xD4,0xF3,0xB,0xF7,
0x18,0x84,0x9C,0xC6,0xD5,0x3D,0xB6,0xF2,0xF2,0x43,0xF7,0x8C,0xED,0xF3,0xCF,0x70,0x3F,0x35,0xD0,0x4A,0x43,
0xFD,0x7,0xBF,0xFA,0x85,0x7B,0x7A,0xB9,0x72,0x3};
const char short_d3[]={0xE,0xB3,0xE4,0xA4,0xB6,0x5E,0x12,0x7,0x3};
const char long_d4[]={0xB0,0x56,0xF7,0x83,0x5F,0xB8,0xD7,0x6E,0xF7,0x34,0xAE,0xEE,0xB1,0x95,0x97,0x1F,0xBA,0x67,0x6C,0x9F,
0x3F,0x31,0x26,0x47,0x7E,0x88,0x3F,0xB5,0x36,0xDF,0x71,0x97,0x7A,0x10,0x72,0xC7,0x21,0xFE,0xD,0x1D,0x5B,0x79,0xAF,
0xC3,0xF,0xB1,0xBF,0x49,0xF,0x6,0xE5,0xAE,0x54,0x7E,0x87,0xA,0xB,0x59,0x7E,0xE8,0xBE,0xFA,0x85,0x7B,0x7A,0xB9,
0x72,0x3};
const char short_d4[]={0xB0,0xE6,0x12,0x1D,0x92,0xDC,0x1,0xD6,0x5C,0x92,0x27,0xCE,0xCD,0x59,0xDF,0x0};
const char long_d5[]={0xC9,0xF5,0xC2,0x7D,0x35,0xF5,0x86,0xCE,0x15,0x43,0xF9,0x83,0x5F,0xB8,0x5F,0x29,0xD,0x99,0xF6,0xD,
0xBD,0x70,0x3F,0x5,0x17,0xD9,0xFC,0x33,0xBA,0xCF,0x4D,0xFC,0x58,0xE5,0x87,0xEE,0xB9,0x42,0xFC,0x10,0xFB,0xB8,
0xBA,0xAF,0xBE,0xD,0x42,0xFD,0xB,0xF7,0x2B,0xA5,0x21,0xD3,0xE6,0x9F,0xE1,0xA6,0xC7,0x26,0xFE,0x45,0xF7,
0x49,0x8B,0x7D,0xA6,0x36,0x94,0x3F,0x69,0x33,0xAF,0xFF,0x90,0x43,0xDA,0x52,0x6F,0xE8,0x85,0xFB,0xA6,0x56,
0xEE,0xBB,0x35,0x7F,0xE6,0x53,0xC8,0x79,0xF7,0x85,0xFB,0x42,0x6D,0xD9,0x6B,0xB7,0xFB,0xEA,0x17,0xEE,
0xA5,0xD5,0x3F,0xC4,0x67,0xDF,0xB2,0x38,0xC4,0xDF,0xDD,0xEC,0x17,0xEE,0xB9,0x62,0x28,0x9F,0x6C,0xF8,0xFB,0xA6,
0xE5,0xD5,0x2F,0xDC,0x4F,0xD,0xB4,0xD2,0x50,0x9F,0x1B};
const char short_d5[]={0x73,0xB0,0x3F,0x9B,0xB3,0xEE,0x73,0x56,0xDE,0x61,0x96,0x9C,0x49,0x74,0x30,};
const char long_d6[]={0x99,0x87,0x7B,0x20,0x7E,0xF5,0x85,0xFB,0xD0,0x9,0xDF,0xD0,0xB,0xF7,0x36,0x8,0xF5,0xA7,0x9A,0x2B,0x7F,
0xE6,0x53,0xC8,0x79,0x37,0xFB,0x10,0xD0,0xC2,0xD5,0x57,0xBF,0x70,0x4F,0x2F,0x57,0xF6,0xB,0xF7,0xD8,0xCA,
0x7B,0x2A,0x4A,0x9B,0x3C,0xF3,0x70,0xCF,0x80,0xA2,0x9A,0xD7,0xBF,0xFA,0x30,0x7A,0x48,0xFE,0xE4,0xB3,0x1B,0x84,0xDC,
0x77,0xEB,0xC9,0x86,0xE7,0x4B,0x6B,0xE1,0x87,0x54,0xBF,0x70,0x6F,0x83,0x50,0x7F,0xAA,0xB9,0xF2,0xCF,0x70,
0x3F,0x35,0xD0,0x4A,0x43,0xFD,0x7,0xBF,0xFA,0x85,0xFB,0xD,0xAE,0xDC,0x0};
const char short_d6[]={0x30,0x61,0x67,0x4D,0x92,0xF8,0x19,0xAC,0x24,0x4F,0x4E,0xB4,0x2,0x96,0xB5,0xE4,0x79,0x3};
const char long_d7[]={0x33,0x1C,0xFC,0x0,0x5C,0xAB,0x7B,0xED,0x76,0x3F,0xF8,0x85,0x7B,0x1B,0x84,0xFA,0x53,0xCD,0x95,0x7F,0x86,
0xFB,0x16,0x92,0x7E,0x6A,0x17,0x6A,0x2D,0x7E,0xE8,0x3E,0x6E,0x59,0x99,0x30,0xFB,0xF1,0xA,0xB,0xD9,0x87,0xF8,
0xC7,0xA1,0xA1,0x7B,0xC,0x8A,0x1A,0x24,0xFD,0xA4,0x31,0x39,0xE,0xB1,0x4F,0x87,0xBA,0x43,0xEC,0x3,0xEA,0x85,0x7B,
0x8A,0xC4,0xB4,0xF9,0xE7,0xE4,0x2D,0x7B,0x3A,0x8,0x79,0xE1,0xEA,0x7E,0xF0,0xE3,0x74,0xA8,0xC,0xB1,0x73,0x3};
const char short_d7[]={0x49,0x1,0x33,0x39,0x31,0xEB,0xAD,0x9B,0x73,0x98,0x19};
const char long_d8[]={0xF3,0xD,0x1E,0xBA,0x8F,0x73,0x13,0x3F,0x56,0xDF,0xD0,0x93,0x72,0x88,0xFD,0xA4,0x6B,0x1B,0xCE,0xF,0x75,0xD3,0x87,
0xF8,0xA7,0xD,0x8E,0xE1,0xB4,0xAF,0xBE,0xDD,0x6F,0x50,0x6F,0x79,0x1C,0x5B,0x79,0x4F,0x45,0x69,0x93,0xF,
0x79,0x1C,0x5A,0xFA,0xEE,0x10,0x50,0xCB,0xF9,0x1D,0xDA,0xDD,0x37,0xF4,0xB4,0x81,0x1E,0x5A,0x42,0x9A,0x3E,0xA5,0x21,
0x8E,0x5C,0xAB,0x7C,0xC,0xA7,0x3D,0xE,0xEF,0x57,0x9E,0x36,0xD0,0xE3,0x12,0x77,0xEB,0x21,0xFE,0x69,0x3,
0xFD,0x84,0x31,0xE4,0x6E,0xC,0x92,0x7D,0xEE,0xA7,0xD,0xEE,0x2,0xAE,0x43,0x43,0xFC,0xB,0xD7,0xBD,0x65,0xA1,0xD6,
0x3D,0x8C,0x1E,0x32,0xC4,0x7E,0xDA,0x40,0xF,0x2D,0x21,0x4D,0x5F,0x87,0x5F,0xE5,0xFC,0xC9,0xE2,0x6F,0x59,0xA8,0x75,
0x5F,0xB8,0x9F,0xDA,0x75,0x43,0xFC,0xEA,0xA5,0x6B,0x4C,0xFB,0xB4,0x81,0x3E,0x2C,0xBC,0x32,0x6D,0x82,0x1};
const char short_d8[]={0x19,0xD8,0xB3,0xC4,0xB9,0xAC,0x30,0xAD,0x98,0x65,0xE6,0x60,0x1B};
#define NDIR 6
const room_code original_connections[RSIZE][NDIR]={
    {0,0,3,6,5,0,},
    {0,0,0,0,0,0,},
    {0,0,4,1,0,0,},
    {0,0,0,3,0,0,},
    {0,0,0,0,0,1,},
    {7,0,1,0,0,0,},
    {0,6,0,0,0,0,},
    {0,0,0,0,0,0,}
};
room world[RSIZE]={
    {1,long_d1,short_d1,{0,0,3,6,5,0,}},
    {2,long_d2,short_d2,{0,0,0,0,0,0,}},
    {3,long_d3,short_d3,{0,0,4,1,0,0,}},
    {4,long_d4,short_d4,{0,0,0,3,0,0,}},
    {5,long_d5,short_d5,{0,0,0,0,0,1,}},
    {6,long_d6,short_d6,{7,0,1,0,0,0,}},
    {7,long_d7,short_d7,{0,6,0,0,0,0,}},
    {8,long_d8,short_d8,{0,0,0,0,0,0,}}
};

const char areyousure[]={0xC9,0xBA,0x4F,0x1B,0x9C,0x81,0xAE,0xF3,0xCF,0x52,0x6A,0xF,0x9F,0x87,0x3F,0xC4,0x5F,0xB7,0x80,0xCA,0x7,0xF4,0x74,
0x39,0x37,};
const char exitrestart[]={0xF0,0x24,0xF0,0x87,0xF8,0xEB,0x16,0x50,0x79,0xF5,0x37,0x69,0x46,0x65,0x3F,0x24,0x2D,0x1C,0x62,0x7F,0x9,0xEF,0xAB,
0xAF,0xCB,0x15,0x5A,0xB9,0x1};
const char header[]={0x59,0x83,0x96,0x53,0x51,0xDA,0x24,0x59,0x7,0xD7,0xF0,0xFB,0x59,0xAB,0x2E,0x21,0x23,0xCB,0xB3,0x90,0xC5,0x2C,0x49,0xB6,0xE6,
0xF0,0x3C,0xB,0x6};
const char headerdescription[]={0x56,0x6A,0xBB,0x8F,0x57,0x4A,0x6D,0x96,0xD,0x39,0xA5,0x6D,0x6B,0xB8,0x87,0x1A,0x88,0xFF,0x90,0xC7,0xA7,0x76,0x29,0x50,
0x43,0xEC,0xBB,0x61,0x47,0xD2,0xE,0xD9,0x37,0xF4,0x2C,0x26,0x55,0x96,0x66,0x1,0xCE,0x6};
const char message1[]={0x33,0xDC,0xFB,0x6E,0xFD,0xE0,0x4F,0xA4,0x79,0x7D,0x6E,0x0};
const char message2[]={0x33,0xDC,0xFB,0x6E,0xFD,0xE0,0x37,0xB5,0x62,0x0};
const char message3[]={0x33,0xDC,0xFB,0x6E,0xFD,0xE0,0x37,0xB5,0x32,0xC4,0xCE,0xF3,0xDC,0x0};
const char message4[]={0xF3,0xD,0x3E,0x91,0xE6,0x7D,0xE1,0xDE,0x77,0xEB,0xB,0xA3,0xCE,0x24,0x5C,0x3E,0x3D,0xA,0x1F,0xB7,0x75,
0xA3,0x2E,0x3D,0x78,0x73,0x3};
const char message5[]={0xF3,0xD,0x3E,0x85,0xC0,0xEB,0xBE,0x5F,0x18,0x95,0x1B};
const char message6[]={0xF3,0xD,0x3E,0x85,0xC0,0xEB,0x64,0xC3,0x69,0x5F,0xB8,0x9F,0x82,0x8B,0xEC,0x2D,0xE9,0xA1,0xEE,0x4A,0x30,};
const char message7[]={0x33,0xDC,0xF3,0x4A,0xD,0x59,0xC2,0xE7,0x6A,0xEA,0x69,0x83,0x87,0xF8,0xB7,0xEC,0x1B,0x7A,0xE1,0xBA,0x4F,
0x97,0x10,0x76,0x76,0xAB,0xE,0xC3,0xA5,0xC8,0x9E,0x9B,0xF8,0xB1,0xCA,0x9F,0x42,0x2E,0x5D,0xB7,0xB7,0x3E,0xE4,0x85,
0xFB,0x19,0x6A,0xCB,0x3E,0xB1,0xDB,0xCD,0xAD,0x1A};
const char message8[]={0xD6,0xEB,0x76,0x3C,0x8D,0x51,0xA7,0xF7,0x50,0x3,0xF1,0xC7,0xD5,0x75,0xFE,0x4C,0x7D,0xF0,0xD3,0x6,0x7A,0x5C,0xE2,
0x6E,0xE5,0x79,0x6E,0x0};
const char message9[]={0xF3,0xD,0xCE,0x1B,0x3A,0xE1,0x87,0xBC,0x70,0xCF,0xA5,0x41,0x67,0x1F,0x1A,0xE2,0x87,0xD8,0xF,0x79,0x5B,0x60,
0xEC,0x54,0x79,0x9E,0x1B};
const char message10[]={0xF3,0xD,0x4E,0x81,0x7A,0xE1,0xBE,0x6,0xF5,0x86,0x5E,0xB8,0xAF,0xD6,0x9,0x3F,0xE4,0x85,0x7B,0x68,0xE8,
0xE6,0xCF,0xD4,0xA7,0xA8,0x9,0x97,0xF,0xD,0xDD,0x3B,0xAD,0xA6,0xD7,0xA0,0x86,0x27,0x69,0x6E,0x0};
const char message11[]={0xF3,0xD,0xEE,0x5B,0xE0,0x75,0x68,0x88,0x7F,0x48,0x5A,0x38,0xC4,0x3E,0xE0,0x85,0x0,0xC9,0xD};
const char message12[]={0xF3,0xD,0xEE,0x5B,0xE0,0x75,0xDE,0x7D,0x48,0x5A,0x38,0xC4,0x3E,0x53,0x3B,0x8D,0x20,0xB9,0x1};
const char message14[]={0x33,0xDC,0x57,0xEB,0x84,0x1F,0x7C,0xE9,0xBA,0x5,0xA8,0xC,0xB1,0x73,0x3};
const char message15[]={0x33,0xDC,0x57,0xEB,0x84,0x1F,0x7C,0xB,0x50,0x19,0x62,0xE7,0x6};
const char message16[]={0xC9,0xA7,0x43,0x65,0x88,0xFD,0x96,0x17,0xEE,0xE9,0x20,0xE4,0x1C,0x29,0x3B,0x7B,0xD6,0xB9,0xC3,0x9E,0x9B,0xDD,0xC1,0xBA,0xCC,0xEC,
0x73,0xB0,0x6F,0x65,0x26,0x31,0x49,0x82,0x1};
const char message18[]={0x33,0xDC,0x63,0x2B,0xEF,0x7,0x5F,0xBA,0xCE,0xE1,0x3D,0x59,0x9F,0x1B};
const char message19[]={0x33,0xDC,0x63,0x2B,0xEF,0x7,0x5F,0xBA,0x8E,0xA1,0xB2,0xCC,0xEB,0x73,0x3};
const char message20[]={0xF3,0xD,0xEE,0x5B,0xE0,0x75,0xC,0xA7,0x7D,0xDA,0x40,0xCF,0x74,0xAB,0xCF,0xD};
const char message21[]={0xF3,0xD,0xEE,0x5B,0xE0,0x75,0x7A,0x43,0x5F,0xB8,0x9F,0x30,0x86,0xDC,0x8D,0x41,0x72,0x3};
const char message22[]={0xF3,0xD,0x6E,0x6F,0xBD,0xE5,0x85,0x7B,0x6C,0xE5,0x7D,0x88,0x7F,0x69,0xD7,0x1B,0x14,0xF,0xBF,0x2F,
0xDC,0x4F,0xC1,0x45,0x36,0xFB,0x30,0x7A,0xC8,0x10,0xFB,0x69,0x3,0xBD,0x1B,0xB5,0xFC,0x21,0xAF,0xE1,0xEE,0xA1,
0xD6,0x17,0xEE,0xDD,0x56,0x19,0x62,0x9F,0x8A,0xD2,0x26,0xB9,0x1};
const char message23[]={0xF3,0xD,0xEE,0x5B,0xE0,0x75,0x7A,0x43,0x9F,0x36,0xD0,0xE3,0x12,0x77,0x2B,0x37,};
const char message30[]={0xD6,0x70,0x4C,0x78,0xE9,0x5A,0xE7,0x6};
const char message31[]={0xD6,0x70,0x4C,0x78,0x6C,0xE5,0x75,0x6E,0x0};
const char message33[]={0xC9,0x27,0xD,0xFC,0x9D,0x7A,0x4C,0xFB,0x9D,0xB0,0x97,0x2F,0x1B,0x6A,0x49,0x9D,0xDD,0xAA,0x43,0x13,0x3F,0x56,0xEF,0xE0,
0x8E,0xC2,0x84,0x5B,0xC3,0xD5,0x7D,0xE8,0x3E,0x6D,0x70,0x1C,0x7E,0x88,0x9D,0x7D,0x6E,0xAD,0x37,0x74,0x4,0x6E,0xC8,
0xED,0x50,0x4B,0xD8,0xEB,0xDC,0xEA,0xD};
const char message34[]={0xF3,0xD,0x8E,0x1B,0x7A,0xA8,0xBB,0xB8,0x96,0xE2,0x5B,0x16,0x87,0xF8,0xA7,0xD,0x1E,0xE2,0x1F,0xB7,0xB5,
0xC1,0x84,0xE9,0x9D,0x7A,0x4C,0x7B,0xC6,0x6,0xC5,0xCE,0x6E,0x15,0xD6,0xEA,0x3E,0x6D,0xF0,0xD0,0x4D,0xF8,0xC,0xB5,0xE9,
0xE3,0x70,0x3F,0xE4,0x85,0xFB,0x29,0xB8,0xC8,0xC2,0xF9,0x1E,0x88,0xBD,0x2D,0x7C,0xA8,0xF5,0xD2,0x75,0xC6,0xA6,
0x87,0xD8,0x7,0x54,0x82,0xD5,0xFC,0x33,0xBA,0x3F,0xB5,0x52,0x80,0xAC,0xD4,0xB9,0x89,0x1F,0xAB,0xFC,0xE5,0xA9,0xB5,
0x9E,0x36,0x78,0xF5,0xB,0xF7,0x1E,0x88,0xBD,0x2D,0xFC,0x10,0x7F,0xD2,0x93,0xE3,0xD3,0x6,0x1F,0xF2,0xF8,0xB4,
0x84,0xE4,0x9F,0x6F,0x70,0xA6,0x56,0xEA,0xD5,0x7D,0x17,0x4C,0xF8,0x1A,0xEE,0x3E,0xC4,0x3F,0x6D,0x70,0x28,0x6,
0x59,0x7F,0x77,0xF0,0x6A,0x58,0x48,0x9A,0x60,0x0};
const char message35[]={0x33,0xDC,0x63,0xF3,0x7E,0xF0,0xE3,0x6E,0xD8,0x32,0xA0,0x31,0xAD,0xD4,0x43,0xC3,0x72,0xAE,0x20,0x64,0xB4,0x64,
0xDF,0xD2,0x2A,0xAF,0xFE,0x14,0xAA,0xE9,0xE9,0x50,0x1D,0xAD,0x7C,0x32,0x1C,0xF7,0x69,0x83,0xDC,0x0};
const char message1000[]={0x73,0x8E,0x91,0xE6,0x6};
const char message1001[]={0x59,0x5B,0x36,0x37,};
const char message1002[]={0x59,0x5B,0x36,0x37,};
const char message1003[]={0x99,0xFA,0xE0,0x57,0xF7,0x71,0xC3,0x29,0x4D,0x30,};
const char message1004[]={0x99,0xFA,0xE0,0x57,0xF7,0x2D,0xC3,0x7E,0xF5,0x2D,0x7B,0xC,0xF1,0x64,0x7D,0x82,0x1};
const char message1005[]={0x99,0xBA,0xEF,0xE5,0x4B,0xD7,0xDD,0x76,0xDA,0x4,0x3};
const char message1006[]={0x99,0xFB,0x16,0x78,0x9D,0x77,0x5F,0x18,0xF5,0x90,0x94,0xC6,0xD5,0x4D,0x30,};
const char message1007[]={0x99,0xFB,0x16,0x78,0x1D,0xC3,0x69,0x5F,0x18,0x75,0x7A,0x14,0xDE,0xDD,0x4,0x3};
const char message1008[]={0x99,0x4F,0x21,0xF0,0xBA,0xDD,0x2F,0x8C,0x3A,0x1D,0x69,0x82,0x1};
const char message1009[]={0xD6,0x30,0xEA,0xBE,0x9F,0x36,0xB8,0xBB,0x21,0xCE,0xD};
const char message1010[]={0x99,0x4F,0x21,0xF0,0xBA,0xEF,0x17,0x46,0xE5,0x6};
const char message1011[]={0x99,0x7,0xD1,0xD,0x9F,0x1E,0xC3,0x69,0x5F,0x18,0x75,0x7A,0x14,0xDE,0xDD,0x4,0x3};
const char message1012[]={0xD6,0x30,0xEA,0x8C,0x41,0xC8,0x33,0xF7,0xED,0xDC,0x0};
const char message1013[]={0x99,0xFA,0xE0,0xFB,0x50,0xC7,0xEC,0x67,0x3E,0x85,0x5C,0xBA,0xCE,0xBB,0xF,0x49,0xB,0x87,0xD8,0x6};
const char message1014[]={0xF3,0xD,0x4E,0x91,0x48,0xD7,0x1F,0x6A,0xBD,0x1};
const char message1015[]={0x2F,0xA0,0xC2,0xAF,0x7E,0x5B,0x2A,0x86,0xDC,0x0};
const char message1016[]={0xA7,0x7A,0x48,0x71,0x6E,0x0};
const char message1018[]={0x74,0xAB,0x18};
const char message1019[]={0x99,0x87,0xFB,0x20,0xBA,0xE1,0xD3,0xD3,0x1B,0x3A,0xC4,0x7E,0x61,0x54,0x6E,0x0};
const char message1020[]={0x99,0x4F,0x21,0xB7,0xFB,0xD5,0x74,0xA8,0x67,0x67,0x6};
const char message1021[]={0xD2,0x5A,0x68,0x0};
const char message1022[]={0xDC,0xA0,0xD0,0x0};
const char message1023[]={0x1B,0x5C,0x6};
const char message1024[]={0xF4,0x72,0x19};
const char message1025[]={0x80,0x32,};
const char message1026[]={0xBE,0x69,0x31,};
const char message1027[]={0xD2,0x5A,0xB8,0xC1,0x65,0x0};
const char message1028[]={0xD2,0x5A,0x48,0x2F,0x97,0x1};
const char message1029[]={0xDC,0xA0,0x70,0x83,0xCB,0x0};
const char message1030[]={0xDC,0xA0,0xB0,0x9D,0x96,0xCB,0x0};
const char message1031[]={0x99,0x4F,0x21,0xE7,0x5D,0x67,0x37,};
const char message1032[]={0x99,0x4F,0xA1,0x9A,0x3A,0xBB,0x1};
const char message1033[]={0x99,0xFB,0x16,0x78,0x1D,0xC3,0x69,0x1F,0x92,0x16,0xE,0xB1,0x4F,0x8F,0xC2,0xBB,0x9B,0x1B};
const char message1035[]={0x96,0xE0,0xA,0x3};
const char* dir[6]={
    message1021,
    message1022,
    message1023,
    message1024,
    message1025,
    message1026};

const char desc_l1[]={0xF1,0x6A,0x9D,0x30,0xFB,0xD,0xCA,0x0};
const char desc_l2[]={0x71,0x5C,0xE2,0x6E,0x19};
const char desc_l3[]={0xF1,0x9,0x63,0xC8,0xDD,0x18,0xC4,0x0};
const char desc_l4[]={0x71,0xA6,0x5B,0xBD,0x1};
const char desc_l5[]={0x71,0xE,0xEF,0xC9,0x1A};
const char desc_l6[]={0x71,0xC,0x95,0x65,0x36,};
const char desc_l7[]={0x71,0x6C,0xE5,0x35,};
const char desc_l8[]={0x71,0x32,0xEA,0xD5,0x3A,0xA1,0x1};
const int original_position[OSIZE]={
    5,0,0,2,4,4,3,0,};
object obj[OSIZE]={
    {1,desc_l1,5,0+ISNOTMOVABLE},
    {2,desc_l2,0,0+ISNOTMOVABLE+ISWEREABLE},
    {3,desc_l3,0,0+ISNOTMOVABLE+ISWEREABLE},
    {4,desc_l4,2,0+ISNOTMOVABLE},
    {5,desc_l5,4,0+ISNOTMOVABLE},
    {6,desc_l6,4,0+ISNOTMOVABLE},
    {7,desc_l7,3,0+ISNOTMOVABLE},
    {8,desc_l8,0,0+ISNOTMOVABLE}
};

room_code current_position;
room_code next_position;
boolean retv;
extern EFFSHORTINDEX ls;
extern char playerInput[];
boolean marker[129];
int counter[129];
object *odummy;

char *searchw(unsigned int w) FASTCALL;
boolean unwear(unsigned int o) FASTCALL;
void printnewline(void)
{
    writesameln("\n");
}

void printspace(void)
{
    writesameln(" ");
}

EFFSHORTINDEX search_object(unsigned int o) FASTCALL
{
    EFFSHORTINDEX idx;
    for(idx=0; idx<OSIZE;++idx)
        if(obj[idx].code==o)
            return idx;
    return 0;
}

object *search_object_p(unsigned int o) FASTCALL
{
    return &obj[search_object(o)];
}
EFFSHORTINDEX search_room(EFFSHORTINDEX r) FASTCALL
{
    for(cdummy=0; cdummy<RSIZE;++cdummy)
        if(world[cdummy].code==r)
            return cdummy;
    return 0;
}

void restart(void)
{
    EFFSHORTINDEX j;
    for(cdummy=1;cdummy<129;++cdummy){
        marker[cdummy]=0;
        counter[cdummy]=0;
    }
    for(j=0; j<RSIZE;++j)
        for(cdummy=0; cdummy<NDIR;++cdummy)
            world[j].directions[cdummy]=original_connections[j][cdummy];
    marker[124]=true;
    marker[121]=true;
    next_position=8;
    for(j=0; j<OSIZE;++j)
        obj[j].position=original_position[j];
}

void show_messagenlf(const char *m) FASTCALL
{
    boolean o;
    cpointer=0;
    bpointer=0;
    compressed=(char *)m;
    do{
        o=decode();
        writesameln(decompress_b);
    } while(o);
}

void show_message(const char *m) FASTCALL
{
    show_messagenlf(m);
    printnewline();
}

boolean are_you_sure(void)
{
    show_message(areyousure);
    GETS(playerInput,BUFFERSIZE);
    if(playerInput[0]=='Y' || playerInput[0]=='y') {
        return 1;
    }
    return 0;
}

#define inventory()\
{\
    boolean gs=false;\
    show_message(message1032);\
    for(cdummy = 0; cdummy<OSIZE; ++cdummy) {\
        dummy=obj[cdummy].position;\
        if(dummy==CARRIED||dummy==WEARED) {\
            gs=true;\
            evidence2();\
            show_messagenlf(obj[cdummy].desc);\
            end_evidence2();\
            normaltxt();\
            if(dummy==WEARED){\
                printspace();\
                show_messagenlf(message1018);\
            }\
            printnewline();\
        }\
    }\
    if(gs==false) show_message(message1033);\
}

void m_move(EFFSHORTINDEX dir) FASTCALL
{
    EFFSHORTINDEX p;
    p=cr->directions[dir];
    if(p) {
        next_position=p;
        marker[120]=false;
    } else 
        show_message(message1008);

}

boolean get(unsigned int o) FASTCALL\
{
    odummy=search_object_p(o);
    if(odummy->position!=current_position) {
        show_message(message1006);
    } else if((odummy->attributes&ISNOTMOVABLE)==0) {
        show_message(message1005);
    } else {
        odummy->position=CARRIED;
        return false;
    }
    return true;
}
boolean vov(unsigned int v1, unsigned int v2);
boolean vovn(unsigned int v1, unsigned int v2, unsigned int n);
boolean vovn100_0(EFFSHORTINDEX n) FASTCALL;
boolean non1(unsigned int n1, unsigned int n2);
void ok(void);
boolean check_verb_noun(unsigned int v, unsigned int n);
boolean cvn70(EFFSHORTINDEX n) FASTCALL;
boolean check_verb_actor(unsigned int v, ACTORTYPE n);
boolean check_verb75_actor(EFFSHORTINDEX n) FASTCALL;
boolean check_verb75_actor_available(EFFSHORTINDEX n) FASTCALL;
boolean check_verb70_actor(EFFSHORTINDEX n) FASTCALL;
boolean check_verb70_actor_available(EFFSHORTINDEX n) FASTCALL;
unsigned char ams(unsigned char  v, unsigned char n, char* m);
#ifdef CV_IS_A_FUNCTION
    boolean cv(unsigned char v) FASTCALL;
#else
    #define cv(v) verb==(v)
#endif
void sendallroom(unsigned int s) FASTCALL;
#ifdef CV_IS_A_FUNCTION
    unsigned int get_object_position(obj_code c) FASTCALL
    {
        return search_object_p(c)->position;
    }
    boolean object_is_here(obj_code c) FASTCALL
    {
        return get_object_position(c)==current_position;
    }
    boolean object_is_carried(obj_code c) FASTCALL
    {
        return get_object_position(c)==CARRIED;
    }
#else
    #define object_is_here(c) (search_object_p(c)->position==current_position)
    #define get_object_position(c) search_object_p(c)->position
    #define object_is_carried(c) (search_object_p(c)->position==CARRIED)
#endif
boolean object_is_available(obj_code c) FASTCALL
{
    return object_is_here(c)||object_is_carried(c);
}
void set_object_position(obj_code c, int pos)
{
    search_object_p(c)->position=pos;
}
void set_object_position0(obj_code c) FASTCALL
{
    set_object_position(c,0);
}
void set_object_positionC(obj_code c) FASTCALL
{
    set_object_position(c,CARRIED);
}
void bring_object_here(obj_code c) FASTCALL
{
    set_object_position(c,current_position);
}
void amsm(EFFSHORTINDEX p, EFFSHORTINDEX c, boolean v, const char *m);
boolean cvna(unsigned int v, unsigned int n, unsigned int o);
boolean cvna70(EFFSHORTINDEX n, EFFSHORTINDEX o);
boolean cvna70neq(EFFSHORTINDEX n) FASTCALL;
boolean drop(unsigned int o) FASTCALL
{
    odummy=search_object_p(o);\
    if(odummy->position==CARRIED){\
        odummy->position=current_position;\
        dummy=odummy->position;\
    } else {\
        show_message(message1007);\
        return true;\
    }\
    return false;\
}

void jump(EFFSHORTINDEX p) FASTCALL
{
    next_position=p;
    marker[120]=false;
}

void hold(unsigned int p) FASTCALL;
char iscarrsome(void);
char iswearsome(void);
#define checkexit()\
{\
    show_message(exitrestart);\
    GETS(playerInput,BUFFERSIZE);\
    if(playerInput[0]=='E' || playerInput[0]=='e'){\
        leave(); exit(0);\
    }\
}
char check_position_marker_on(unsigned int p, unsigned char f);
char check_position_marker_off(unsigned int p, unsigned char f);
void hi_cond(void)
{
    retv=true;
    // if res? 50 then set 50 rese 124 endif
    if(marker[50]==false) {
        marker[50]=true;
        marker[124]=false;
    }

    // IF at 8 AND res? 8 THEN set 8 goto 1 ENDIF
    if(current_position==8) if(marker[8]==false) {
        marker[8]=true;
        jump(1);
        return;
    }

    // if at 1 and res? 11 then mess 1 endif
    if(1) amsm(1,11,0,message1);

    // if at 1 and set? 11 then mess 2 endif
    if(1) amsm(1,11,1,message2);

    // if at 2 and res? 11 then mess 1 endif
    if(1) amsm(2,11,0,message1);

    // if at 2 and set? 11 then mess 2 endif
    if(1) amsm(2,11,1,message2);

    // if at 2 and carr 8 then set 122 endif
    if(current_position==2) if(object_is_carried(8)) {
        marker[122]=true;
    }

    // if at 2 and here 8 then set 122 endif
    if(current_position==2) if(object_is_here(8)) {
        marker[122]=true;
    }

    // if at 2 and notcarr 8 then rese 122 endif
    if(current_position==2) if(object_is_carried(8)==false) {
        marker[122]=false;
    }

    // if at 2 and nothere 8 then rese 122 endif
    if(current_position==2) if(object_is_here(8)==false) {
        marker[122]=false;
    }

    // IF carr 8 THEN set 122 ENDIF  ho la torcia accesa
    if(object_is_carried(8)) {
        marker[122]=true;
    }

    // IF res? 16 and ctreq 126 0 then cset 126 61 ENDIF  
    if(marker[16]==false) if(counter[126]==0) {
        counter[126]=61;
    }

    // IF res? 16 and ctreq 126 10 then mess 33 ENDIF  
    if(marker[16]==false) if(counter[126]==10) {
        show_message(message33);
    }

    // IF res? 16 and ctreq 126 1 then mess 34 quit ENDIF
    if(marker[16]==false) if(counter[126]==1) {
        show_message(message34);
        if(are_you_sure()) {
            leave(); exit(0);
        }
        return;
    }

    retv=false;    return;
}
void low_cond(void)
{
    retv=true;
    // if verb 40 then quit endif
    if(cv(40)) {
        if(are_you_sure()) {
            leave(); exit(0);
        }
        return;
    }

    // if verb 74 and noun 72 then inve wait endif
    if(check_verb_noun(74,72)) {
        inventory();
        return;
    }

    // if verb 0 and noun 72 then inve wait endif
    if(check_verb_noun(0,72)) {
        inventory();
        return;
    }

    // if verb 987 then restart endif
    if(verb==987) {
        if(are_you_sure())
            restart();
        return;
    }

    // if verb 988 then save wait endif salva la partita
    if(verb==988) {
        SAVE;
        return;
    }

    // if verb 989 then load wait endif carica la partita
    if(verb==989) {
        LOAD;
        return;
    }

    // if verb  80 then nord wait endif
    if(cv(80)) {
        m_move(0);
        return;
    }

    // if verb 81 then sud wait endif
    if(cv(81)) {
        m_move(1);
        return;
    }

    // if verb 82 then est wait endif
    if(cv(82)) {
        m_move(2);
        return;
    }

    // if verb 83 then ovest wait endif
    if(cv(83)) {
        m_move(3);
        return;
    }

    // if verb 84 then alto wait endif
    if(cv(84)) {
        m_move(4);
        return;
    }

    // if verb 85 then basso wait endif
    if(cv(85)) {
        m_move(5);
        return;
    }

    // if verb 110 then look wait endif
    if(cv(110)) {
        marker[120]=false;
        return;
    }

    // IF VERB 50 AND NO1LT 9 THEN GET NO1 OKAY ENDIF
    if(cv(50)) if((noun1>0&&noun1<9)) {
        if(get(noun1)) return;
        ok();
        return;
    }

    // IF VERB 55 AND NO1LT 9 THEN DROP NO1 OKAY ENDIF
    if(cv(55)) if((noun1>0&&noun1<9)) {
        if(drop(noun1)) return;
        ok();
        return;
    }

    // IF verb 110 AND noun 58 THEN mess 1009 WAIT ENDIF  GUARDA  PANCA
    if(check_verb_noun(110,58)) {
        show_message(message1009);
        return;
    }

    // IF verb 36 AND noun 59 THEN mess 1009 WAIT ENDIF  CERCA  PAGLIA
    if(check_verb_noun(36,59)) {
        show_message(message1009);
        return;
    }

    // IF verb 37 AND noun 1 THEN mess 1010 WAIT ENDIF  ACCENDI  TORCIA
    if(check_verb_noun(37,1)) {
        show_message(message1010);
        return;
    }

    // IF verb 38 AND noun 1 AND carr 8 AND res? 121 THEN swap 8 1 rese 122 look WAIT ENDIF  SPEGNI  TORCIA  
    if(check_verb_noun(38,1)) if(object_is_carried(8)) if(marker[121]==false) {
        dummy=get_object_position(8);
        search_object_p(8)->position=get_object_position(1);
        search_object_p(1)->position=dummy;
        marker[122]=false;
        marker[120]=false;
        return;
    }

    // IF VERB 38 AND NOUN 1 AND CARR 8 AND Set? 121 THEN SWAP 8 1 RESE 122 okay ENDIF  SPEGNI  TORCIA     SPEGNI  TORCIA  
    if(check_verb_noun(38,1)) if(object_is_carried(8)) if(marker[121]) {
        dummy=get_object_position(8);
        search_object_p(8)->position=get_object_position(1);
        search_object_p(1)->position=dummy;
        marker[122]=false;
        ok();
        return;
    }

    // IF VERB 38 AND NOUN 1 AND CARR 1 THEN mess 14 WAIT ENDIF  SPEGNI  TORCIA     SPEGNI  TORCIA  
    if(check_verb_noun(38,1)) if(object_is_carried(1)) {
        show_message(message14);
        return;
    }

    // IF VERB 38 AND NOUN 1 THEN MESS 1010 WAIT ENDIF  SPEGNI  TORCIA     SPEGNI  TORCIA     SPEGNI  TORCIA     SPEGNI  TORCIA
    if(check_verb_noun(38,1)) {
        show_message(message1010);
        return;
    }

    // IF VERB 70 AND NOUN 61 THEN MESS 30 WAIT ENDIF  LEGGI  AVVISO     LEGGI  AVVISO
    if(cvn70(61)) {
        show_message(message30);
        return;
    }

    // IF verb 100 AND noun 7 THEN mess 31 WAIT ENDIF  MONTA  CAVALLO
    if(check_verb_noun(100,7)) {
        show_message(message31);
        return;
    }

    // IF verb 70 AND noun 7 THEN mess 31 WAIT ENDIF  ESAMINA  CAVALLO
    if(cvn70(7)) {
        show_message(message31);
        return;
    }

    // IF verb 115 AND noun 2 AND carr 2 THEN wear 2 okay ENDIF  INDOSSA  ELMETTO  
    if(check_verb_noun(115,2)) if(object_is_carried(2)) {
        dummy=search_object(2);
        odummy=&obj[dummy];
        if((odummy->attributes&ISWEREABLE)!=0&&(odummy->position==CARRIED||odummy->position==current_position)){
            odummy->position=WEARED;
            ++counter[118];
        } else if(odummy->position==WEARED) {
            show_message(message1019);
            return;
        } else {
            show_message(message1010);
            return;
        }
        ok();
        return;
    }

    // IF VERB 115 AND NOUN 3 AND CARR 3 THEN WEAR 3 OKAY ENDIF  INDOSSA  ELMETTO     INDOSSA  COTTA DI MAGLI
    if(check_verb_noun(115,3)) if(object_is_carried(3)) {
        dummy=search_object(3);
        odummy=&obj[dummy];
        if((odummy->attributes&ISWEREABLE)!=0&&(odummy->position==CARRIED||odummy->position==current_position)){
            odummy->position=WEARED;
            ++counter[118];
        } else if(odummy->position==WEARED) {
            show_message(message1019);
            return;
        } else {
            show_message(message1010);
            return;
        }
        ok();
        return;
    }

    retv=false;
    return;
}
void local_cond(void)
{
    retv=true;
    switch(current_position) {
    case 1:
    // IF verb 81 and RES? 11 THEN  MESS 5 MESS 1 WAIT ENDIF
    if(cv(81)) if(marker[11]==false) {
        show_message(message5);
        show_message(message1);
        return;
    }

    // IF verb 81 AND set? 11 THEN rese 121 goto 2 WAIT ENDIF  SUD
    if(cv(81)) if(marker[11]) {
        marker[121]=false;
        jump(2);
        return;
    }

    // IF verb 112 AND noun 114 AND res? 11 THEN set 11  mess 3 WAIT ENDIF  APRI  PORTA
    if(check_verb_noun(112,114)) if(marker[11]==false) {
        marker[11]=true;
        show_message(message3);
        return;
    }

    // IF verb 113 AND noun 114 AND set? 11 THEN rese 11 mess 4 WAIT ENDIF    APRI  PORTA  CHIUDI  PORTA
    if(check_verb_noun(113,114)) if(marker[11]) {
        marker[11]=false;
        show_message(message4);
        return;
    }

    break;
    case 2:
    // IF verb 80 AND set? 11 THEN set 121 goto 1 WAIT ENDIF  NORD
    if(cv(80)) if(marker[11]) {
        marker[121]=true;
        jump(1);
        return;
    }

    // IF verb 112 AND noun 114 AND res? 11 THEN set 11  mess 3 WAIT ENDIF  APRI  PORTA
    if(check_verb_noun(112,114)) if(marker[11]==false) {
        marker[11]=true;
        show_message(message3);
        return;
    }

    // IF verb 113 AND noun 114 AND set? 11 THEN rese 11 mess 4 WAIT ENDIF    APRI  PORTA  CHIUDI  PORTA
    if(check_verb_noun(113,114)) if(marker[11]) {
        marker[11]=false;
        show_message(message4);
        return;
    }

    break;
    case 3:
    // IF verb 36 AND noun 59 AND res? 13 THEN mess 9 brin 3 set 13 WAIT ENDIF  CERCA  PAGLIA
    if(check_verb_noun(36,59)) if(marker[13]==false) {
        show_message(message9);
        bring_object_here(3);
        marker[13]=true;
        return;
    }

    // IF verb 36 AND noun 59 AND set? 13 THEN mess 11 WAIT ENDIF  CERCA  PAGLIA
    if(check_verb_noun(36,59)) if(marker[13]) {
        show_message(message11);
        return;
    }

    // IF verb 100 and noun 7 and ISNOTWEARING 2 THEN MESS 23 WAIT ENDIF
    if(check_verb_noun(100,7)) if(get_object_position(2)!=WEARED) {
        show_message(message23);
        return;
    }

    // IF verb 100 and noun 7 and isnotwearing 3 THEN mess 21 WAIT ENDIF
    if(check_verb_noun(100,7)) if(get_object_position(3)!=WEARED) {
        show_message(message21);
        return;
    }

    // IF verb 100 and noun 7 and notcarr 4 THEN mess 20 WAIT ENDIF
    if(check_verb_noun(100,7)) if(object_is_carried(4)==false) {
        show_message(message20);
        return;
    }

    // IF verb 100 and noun 7 and res? 14 THEN mess 18 WAIT ENDIF
    if(check_verb_noun(100,7)) if(marker[14]==false) {
        show_message(message18);
        return;
    }

    // IF verb 100 and noun 7 and res? 15 THEN mess 19 WAIT ENDIF
    if(check_verb_noun(100,7)) if(marker[15]==false) {
        show_message(message19);
        return;
    }

    // IF verb 100 and noun 7 THEN set 16 mess 22 quit ENDIF
    if(check_verb_noun(100,7)) {
        marker[16]=true;
        show_message(message22);
        if(are_you_sure()) {
            leave(); exit(0);
        }
        return;
    }

    // IF verb 39 AND noun 5 AND  no2eq 7 AND carr 5 THEN set 14 to 5 8 okay ENDIF  metti SELLA  CAVALLO
    if(check_verb_noun(39,5)) if(noun2==7) if(object_is_carried(5)) {
        marker[14]=true;
        set_object_position(5,8);
        ok();
        return;
    }

    // IF verb 39 AND noun 6 AND no2eq 7 AND carr 6 THEN set 15 to 6 8 okay ENDIF  METTI  BRIGLIE  CAVALLO
    if(check_verb_noun(39,6)) if(noun2==7) if(object_is_carried(6)) {
        marker[15]=true;
        set_object_position(6,8);
        ok();
        return;
    }

    // IF verb 70 AND noun 7 THEN mess 35 ENDIF
    if(cvn70(7)) {
        show_message(message35);
    }

    // IF res? 14 THEN mess 18 ENDIF
    if(marker[14]==false) {
        show_message(message18);
    }

    // IF res? 15 THEN mess 19 ENDIF
    if(marker[15]==false) {
        show_message(message19);
    }

    // IF verb 70 AND noun 7 THEN wait ENDIF
    if(cvn70(7)) {
        return;
    }

    break;
    case 7:
    // IF verb 110 AND noun 58 AND adve 75 AND res? 12 THEN mess 8 brin 2 WAIT ENDIF  GUARDA  PANCA  SOTTO
    if(check_verb_noun(110,58)) if(adve==75) if(marker[12]==false) {
        show_message(message8);
        bring_object_here(2);
        return;
    }

    // IF verb 110 AND noun 58 AND res? 12 THEN mess 8 brin 2 WAIT ENDIF  GUARDA  PANCA  SOTTO
    if(check_verb_noun(110,58)) if(marker[12]==false) {
        show_message(message8);
        bring_object_here(2);
        return;
    }

    // IF verb 37 AND noun 1 AND carr 8 THEN mess 15 WAIT ENDIF  ACCENDI  TORCIA
    if(check_verb_noun(37,1)) if(object_is_carried(8)) {
        show_message(message15);
        return;
    }

    // IF verb 37 AND noun 1 AND carr 1 THEN mess 10 swap 1 8 WAIT ENDIF  ACCENDI  TORCIA
    if(check_verb_noun(37,1)) if(object_is_carried(1)) {
        show_message(message10);
        dummy=get_object_position(1);
        search_object_p(1)->position=get_object_position(8);
        search_object_p(8)->position=dummy;
        return;
    }

    // IF verb 70 AND noun 61 THEN mess 16 WAIT ENDIF  LEGGI  AVVISO
    if(cvn70(61)) {
        show_message(message16);
        return;
    }

    }
    retv=false;    return;
}

void game_cycle(void)
{
    unsigned char k;
    boolean ve,pa;
    while(1){
        current_position=next_position;
        if(marker[120]==false&&(marker[121]||marker[122])) {
            printnewline();
            evidence1();
            cr=&world[search_room(current_position)];
            show_messagenlf(cr->short_d);
            printspace();
            end_evidence1();
            normaltxt();
            printspace();
            show_message(cr->long_d);
            printnewline();
            marker[120]=true;
            ve=false;
            for(k=0;k<OSIZE;++k)
                if(obj[k].position==current_position) {
                    if(ve==false) {
                        show_message(message1031);
                        ve=true;
                        evidence2();
                    }
                    show_message(obj[k].desc);
                }
            end_evidence2();
            normaltxt();
            if(marker[124]) {
                pa=false;
                for(k=0; k<NDIR; ++k)
                    if(cr->directions[k]) {
                        if(pa==false) {
                            show_messagenlf(message1020);
                            pa=true;
                        }
                    evidence3();
                    show_messagenlf(dir[k]);
                    printspace();
                    end_evidence3();
                }
                normaltxt();
                printnewline();
            }
        }
        hi_cond();
        if(retv) continue;
        printnewline();
        if(ls==0 && counter[125]<5) show_message(message1012);
        interrogationAndAnalysis();
        local_cond();
        if(retv) continue;
        low_cond();
        if(retv) continue;
        show_message(cv(0)?message1009:message1010);
    }
}

int main(void)
{
    restart();
    init_term();
    evidence2();
    show_message(header);
    show_message(headerdescription);
    end_evidence2();
    normaltxt();
    waitkey();
    game_cycle();
    return 0;
}
#ifdef CV_IS_A_FUNCTION
boolean cv(unsigned char v) FASTCALL
{
    return verb==v;
}
#endif
void ok(void)
{
        show_message(message1000);
}
boolean check_verb_noun(unsigned int v, unsigned int n)
{
    return verb==v&&noun1==n;
}
boolean cvn70(EFFSHORTINDEX n) FASTCALL
{
    return check_verb_noun(70,n);
}
void amsm(EFFSHORTINDEX p, EFFSHORTINDEX c, boolean v, const char *m)
{
    if(current_position==p&&marker[c]==v) show_message(m);
}
