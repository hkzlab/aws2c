/* File generated by aws2c */

#include<stdlib.h>
#include"config.h"

#include"aws.h"

#include"inout.h"
#include"systemd.h"

extern unsigned int verb;
extern unsigned int noun1;
extern unsigned int noun2;
extern ADVERBTYPE adve;
extern ACTORTYPE actor;
extern ADJECTIVETYPE adjective;
unsigned int dummy;
EFFSHORTINDEX cdummy;
#define CARRIED 1500
#define WEARED 1600
room *cr;

char *compressed;
unsigned char bpointer;
unsigned int cpointer;
char decompress_b[B_SIZE+1];
unsigned char currbyte;

#define NUM_NODES 115
const tree huftree[NUM_NODES]={
    {49,255,255},
    {50,255,255},
    {255,0,1},
    {52,255,255},
    {56,255,255},
    {255,3,4},
    {72,255,255},
    {89,255,255},
    {255,6,7},
    {107,255,255},
    {120,255,255},
    {255,9,10},
    {255,11,8},
    {255,5,2},
    {48,255,255},
    {90,255,255},
    {255,14,15},
    {71,255,255},
    {255,17,16},
    {255,13,12},
    {70,255,255},
    {81,255,255},
    {255,20,21},
    {113,255,255},
    {121,255,255},
    {255,23,24},
    {34,255,255},
    {68,255,255},
    {255,26,27},
    {77,255,255},
    {255,29,18},
    {58,255,255},
    {63,255,255},
    {255,31,32},
    {122,255,255},
    {255,34,22},
    {80,255,255},
    {255,19,36},
    {85,255,255},
    {255,38,25},
    {82,255,255},
    {255,40,28},
    {79,255,255},
    {84,255,255},
    {255,42,43},
    {67,255,255},
    {255,30,45},
    {33,255,255},
    {255,33,47},
    {44,255,255},
    {83,255,255},
    {255,49,50},
    {102,255,255},
    {255,35,52},
    {65,255,255},
    {255,37,54},
    {69,255,255},
    {255,56,39},
    {73,255,255},
    {98,255,255},
    {255,58,59},
    {78,255,255},
    {76,255,255},
    {255,61,62},
    {104,255,255},
    {255,41,64},
    {255,44,46},
    {255,51,48},
    {255,53,55},
    {255,57,60},
    {103,255,255},
    {255,63,70},
    {39,255,255},
    {255,65,72},
    {109,255,255},
    {255,66,74},
    {118,255,255},
    {255,67,76},
    {46,255,255},
    {255,68,78},
    {112,255,255},
    {255,69,80},
    {255,71,73},
    {0,255,255},
    {255,83,75},
    {117,255,255},
    {255,85,77},
    {99,255,255},
    {255,87,79},
    {100,255,255},
    {255,89,81},
    {115,255,255},
    {114,255,255},
    {255,91,92},
    {110,255,255},
    {255,82,94},
    {116,255,255},
    {255,84,96},
    {108,255,255},
    {255,86,98},
    {105,255,255},
    {255,100,88},
    {111,255,255},
    {255,90,102},
    {101,255,255},
    {255,104,93},
    {97,255,255},
    {255,106,95},
    {255,97,99},
    {255,101,103},
    {32,255,255},
    {255,110,105},
    {255,107,108},
    {255,109,111},
    {255,112,113},
};

#ifndef INTERNAL_DEF
EFFSHORTINDEX iii;
#endif
char hufget(void)
{
#ifdef INTERNAL_DEF
EFFSHORTINDEX iii;
#endif
    iii=NUM_NODES-1;
    while(1) {
        if(currbyte&0x1) {
            iii=huftree[iii].son1idx;
        } else {
            iii=huftree[iii].son0idx;
        }
        if(++bpointer==8) {
            bpointer=0;
            currbyte=compressed[++cpointer];
        } else {
            currbyte>>=1;
        }
        if(huftree[iii].c!=255)
            return huftree[iii].c;
    }
}

boolean decode(void)
{
    register char c;
    EFFSHORTINDEX k=0;
    if(bpointer==0)
       currbyte=compressed[cpointer];
    do {
        c=hufget();
        SHIFTPETSCII;
        decompress_b[k++]=c;
    } while(c!='\0'&&!(c==' '&&k>B_SIZE-15)&&k<B_SIZE);
    if(c!='\0') {
        decompress_b[k]='\0';
        return true;
    }
    return false;
}
const word dictionary[DSIZE]={
    {0x41, 0x0, 0x0,150,0},
    {0x4d, 0xf3, 0xfa,37,1},
    {0xf1, 0x4c, 0x54,84,1},
    {0xf7, 0x50, 0x52,112,1},
    {0xf7, 0xfb, 0xe4,61,2},
    {0xee, 0xf0, 0x53,85,1},
    {0xe9, 0xfe, 0x53,40,1},
    {0x40, 0xe0, 0xfd,6,2},
    {0xf5, 0xfc, 0xee,989,1},
    {0x43, 0xf3, 0xe8,100,1},
    {0x4d, 0xf3, 0xe7,7,2},
    {0xff, 0xfa, 0x52,36,1},
    {0xe9, 0xf2, 0xfd,113,1},
    {0xe8, 0xf0, 0x54,3,2},
    {0x45, 0x0, 0x0,82,1},
    {0x4f, 0xe6, 0xe4,2,2},
    {0xe8, 0xf1, 0x54,31,1},
    {0x49, 0xe4, 0xf2,70,1},
    {0x45, 0x53, 0x54,82,1},
    {0xfe, 0xed, 0x55,36,1},
    {0xfa, 0xe4, 0x4f,60,2},
    {0x47, 0x0, 0x0,110,1},
    {0x47, 0x49, 0x55,85,1},
    {0xea, 0xef, 0xfd,110,1},
    {0x49, 0x0, 0x0,72,2},
    {0x47, 0xe3, 0xea,115,1},
    {0xff, 0xfc, 0xfa,39,1},
    {0x5f, 0x5f, 0x53,39,1},
    {0xfd, 0x52, 0x4b,72,2},
    {0xf0, 0xf6, 0xef,55,1},
    {0xf4, 0xf2, 0x47,70,1},
    {0xe6, 0xf2, 0x54,39,1},
    {0xe6, 0xf0, 0x4e,100,1},
    {0xe6, 0xe3, 0xef,74,1},
    {0x4e, 0x0, 0x0,80,1},
    {0xf5, 0x4f, 0x52,80,1},
    {0x4f, 0x0, 0x0,83,1},
    {0xe3, 0xfc, 0x45,83,1},
    {0xe3, 0xf6, 0xfb,59,2},
    {0xec, 0xfe, 0x4e,58,2},
    {0xe3, 0xfe, 0xfb,50,1},
    {0x50, 0x4f, 0x49,9999,3},
    {0xfb, 0xf0, 0x52,114,2},
    {0xee, 0x4f, 0x53,55,1},
    {0xe1, 0xe8, 0xf1,50,1},
    {0xe0, 0xef, 0xfd,9999,3},
    {0xed, 0x47, 0x43,987,1},
    {0x53, 0x0, 0x0,81,1},
    {0xe5, 0x41, 0x4c,101,1},
    {0xfa, 0xfe, 0x4c,988,1},
    {0xe0, 0xfa, 0x4c,5,2},
    {0xf8, 0xfe, 0x54,75,0},
    {0xe8, 0xef, 0x41,4,2},
    {0xeb, 0xe0, 0xf1,38,1},
    {0x53, 0x55, 0x0,84,1},
    {0x53, 0x55, 0x44,81,1},
    {0xe8, 0xf8, 0xee,1,2},
    {0x56, 0x41, 0x49,100,1}
};

const char long_d1[]={0x96,0xCD,0x3D,0x3E,0x5F,0xEA,0xAF,0xE1,0xB7,0x72,0xBE,0x84,0xA7,0xE7,0xDE,0xF9,0x88,0xB7,0xA7,0x70,
0xBF,0xBD,0xE6,0x1E,0xCA,0xEE,0xE9,0xAE,0xCC,0xF0,0xF0,0x53,0x2F,0x35,0x17,0x93,0x6E,0x28,0x6B,0xFB,0x9E,
0xAE,0xC6,0x7B,0xE0,0xD2,0x7B,0xAD,0xDA,0xB,0x5F,0xDD,0x4F,0x7B,0x25,0x46,0x1A,0xFC,0x12,0xC8,0x67,0x69,
0x1C,0x73,0x68,0x8F,0xFB,0x17,0x8B,0x19,0xC6,0x3E,0xE4,0x1A,0x2B,0xB1,0x97,0xE0,0xB7,0x7,0xBF,0xD9,0xF7,
0x5F,0xCF,0xE9,0x63,0xFD,0x50,0xAC,0x9C,0x2F,0xE1,0xE9,0xB9,0xF7,0x6E,0xD8,0x33,0x65,0x89,0x3E,0x7A,
0x8E,0xD5,0xFD,0x15,0x2B,0xE7,0x4E,0xE3,0xCB,0xF7,0x3,0xB9,0x0};
const char short_d1[]={0xD2,0x12,0x14,0x92,0x55,0xC4,0xA,0x1};
const char long_d2[]={0x44,0x1A,0x5F,0xBE,0x1F,0xD8,0xD1,0x33,0x8C,0x25,0xC8,0xF7,0xB1,0xCC,0x7F,0xA5,0x60,0xB7,0x97,0xCC,0x47,
0x3E,0xE9,0x66,0x8D,0xE3,0x9B,0x1A,0xD5,0x58,0x4C,0xA3,0x8E,0x95,0x18,0xBE,0x1C,0x16,0xEB,0x5F,0x82,0xA1,
0xB7,0xE0,0x7D,0x3C,0xFD,0xE7,0x1E,0xF7,0x6F,0xCF,0xB8,0xDF,0x6A,0xFC,0xD3,0xC8,0x97,0x3D,0xEE,0x5F,0x96,0xE8,
0xA3,0x67,0x18,0xAB,0xFB,0x2B,0x72,0x1};
const char short_d2[]={0xD9,0x14,0x52,0x2A,0x28,0xAA,0xB2,0x5};
const char long_d3[]={0x52,0x62,0xFA,0xDB,0xEE,0xF1,0xB9,0xDF,0x9E,0xC2,0xFD,0x56,0xCE,0x97,0xF0,0xF4,0xDC,0x3B,0x9F,0x65,0xAB,
0xF6,0x62,0x72,0x5C,0xAC,0x8E,0x2B,0xB1,0x44,0x1F,0x3D,0xC3,0xBD,0xA7,0x1F,0xDA,0x2B,0xB1,0x1A,0xA4,0x7,
0x96,0xF9,0xEF,0x25,0xE4,0xAB,0xC4,0x34,0xEA,0xFB,0x6A,0x3E,0x96,0x9A,0x8B,0x49,0x37,0x94,0xDD,0xD3,0xF1,0xB9,
0x63,0xF,0x8E,0x95,0x73,0xC7,0x32,0xEF,0x7F,0xA8,0xF9,0x58,0xB9,0x58,0x82,0xD,0xF7,0xC8,0x57,0xE5,0x4B,
0xFD,0x35,0xFC,0x76,0xF4,0x50,0xD6,0xF6,0x3D,0xCD,0x5};
const char short_d3[]={0x96,0x92,0xD9,0x44,0x62,0x85,0x0};
const char long_d4[]={0x19,0x9B,0x7B,0x8A,0x1D,0x3D,0xC7,0x9E,0x82,0x33,0x60,0xA5,0xED,0xDB,0x8B,0x65,0xDE,0xFF,0xE0,0x5E,0x2C,
0xC1,0x86,0x7B,0xE4,0x93,0x8E,0xBD,0xE6,0xDE,0xC7,0xD3,0x7F,0xEE,0x71,0xFF,0x76,0xAB,0xA3,0x3D,0x96,0xA8,
0x37,0x3D,0x26,0x9B,0x7B,0x4D,0x72,0x4C,0xA3,0xEE,0x95,0xD8,0x55,0x66,0xA2,0x6,0x49,0x6,0xE4,0x63,0xED,0xD5,0xF7,
0x97,0x60,0xC3,0x13,0xFE,0xE5,0x23,0xDE,0x9E,0xC2,0xFD,0xF6,0x9A,0x7B,0x28,0x6B,0xFB,0x9E,0xE6,0x2};
const char short_d4[]={0x19,0x55,0x50,0x50,0x64,0x4B,0x56,0xA2,0xC8,0x16,};
const char long_d5[]={0x55,0xBC,0x14,0x32,0x6,0xF7,0xDB,0x4B,0xF0,0x5B,0xA2,0x8F,0x9E,0xD3,0xC7,0xFA,0xA1,0x58,0x39,0x5F,
0xC2,0xD3,0x73,0xEF,0x3D,0xBD,0xF7,0x3A,0x1F,0x65,0x73,0x7B,0xED,0x5,0x1A,0x7B,0xCD,0xBD,0xCA,0x4C,0x58,0x2C,0x78,
0x75,0x5C,0x9,0x8B,0x5,0xEF,0xDD,0xB7,0x23,0x43,0xF4,0x4A,0xEC,0x1D,0x6B,0xF0,0xB9,0x23,0x5F,0x95,0x5C,0x1B,0x92,
0xC1,0xBD,0x72,0xEE,0x37,0x37,0x4C,0x52,0x6F,0x70,0x54,0xE3,0x97,0x5B,0xA2,0xDE,0xF4,0x98,0x6C,0xEE,0x5,
0xA7,0xDF,0x29,0xA0,0xB7,0x2,0x1B,0xAC,0x31,0xB8,0x63,0x75,0x7F,0xC5,0x50,0xDF,0x57,0xE4,0xCB,0xDA,0xEF,
0xF5,0xEC,0x2B,0xF7,0x6F,0x8E,0x3D,0x38,0x56,0xCE,0xA7,0xBF,0xB9,0x87,0x71,0xFF,0xB2,0xB3,0x58,0x89,
0xD3,0xDF,0x2B,0x31,0xF9,0x2C,0xE6,0xB7,0x97,0xE0,0xB7,0xD4,0x5C,0x4C,0x6A,0xEE,0x91,0x61,0xE8,0xF1,0xF9,
0x52,0x7F,0xD,0xBF,0x5C,0x0};
const char short_d5[]={0x55,0x84,0x49,0x57,0x49,0xC9,0x5E,0x36,0x91,0x58,0x31,0x4B,0xE9,0x6C,0x62,0x85,0x0};
const char long_d6[]={0x52,0x62,0xFA,0xDB,0xEE,0xBD,0x56,0xED,0x39,0x8D,0x9F,0x7A,0xE5,0x7C,0x75,0x3F,0xED,0x95,0x18,0x69,0xF0,
0x4B,0x20,0x5F,0xD6,0x7E,0xAF,0x67,0x5F,0xB9,0x7F,0x16,0x33,0xAE,0xF7,0xA3,0xBF,0x7C,0xAC,0x37,0xFB,0xFE,0xEB,0xB5,
0x7D,0x4F,0x2D,0xE6,0x58,0xD,0x55,0x43,0x7A,0x60,0x58,0x82,0xD,0xF7,0x5E,0x89,0x25,0x13,0x2B,0x6D,0xFF,
0x8B,0x65,0xE2,0xAF,0xC6,0xD7,0xCB,0x57,0x89,0xB1,0xBA,0xBF,0x62,0xD5,0x78,0xF,0x4B,0xCD,0xC5,0xA4,0x1B,0xC6,
0xFD,0xCB,0xCA,0xB1,0xFE,0x5E,0xF8,0xEA,0x7E,0xDA,0x2B,0x31,0xD2,0xE0,0x97,0x40,0xBE,0x2A,0x5F,0xEA,0xAF,
0xE1,0xB7,0xA3,0x87,0xB2,0x7B,0x9A,0xB};
const char short_d6[]={0x96,0x12,0x92,0x92,0x12,0x23,0xD2,0xD9,0x14,0xD2,0x12,0x2};
const char long_d7[]={0x19,0x9B,0x7B,0x8A,0x25,0xC8,0xF7,0xB1,0x57,0xE3,0x2B,0x18,0x3B,0x7A,0xE1,0xAB,0xFB,0x69,0xAF,0xC4,0x48,
0x83,0x5F,0x2,0xF9,0x88,0xB7,0xD7,0x7E,0x4B,0x2D,0x77,0x9,0x5,0xBD,0xD7,0xDC,0x33,0x8C,0xD5,0xE0,0x84,
0x5D,0x99,0xE1,0x29,0xEC,0xF6,0xB6,0xD8,0x95,0x19,0x5E,0xA6,0xE9,0xD4,0x4B,0xD4,0xDB,0x4B,0x5D,0xD7,0x71,0xAA,
0x18,0xDC,0x8F,0xFC,0x90,0x8F,0xF5,0xF6,0xE3,0x25,0x78,0x1,0x97,0x5E,0xF8,0xEA,0x7E,0xDA,0xF9,0x2C,0xCD,
0xC,0x63,0xE5,0xDC,0x6F,0x35,0xFE,0x69,0x2C,0xD1,0x47,0xCF,0xF0,0x60,0xDB,0xF1,0x3A,0x17,};
const char short_d7[]={0x59,0x25,0x2C,0x25,0x25,0x46,0xB9,0x6A,0x52,0x55,0xCA,0xA6,0xA0,0x5C,0x95,0x2D,0x0};
const char long_d8[]={0x96,0x17,0x33,0xBC,0xD7,0x5E,0xA0,0xBD,0x72,0xEE,0x34,0xBE,0xC,0xC5,0x4A,0x8C,0xE2,0x26,0xF5,0x26,0x77,0x2B,
0x67,0xC7,0xCC,0x4B,0xF1,0x6F,0x25,0x56,0x43,0xD5,0x90,0x1E,0x18,0x96,0x60,0xC3,0xBD,0xA7,0x1F,0xAB,
0x3B,0x51,0x63,0x72,0xB0,0xD1,0xC8,0x97,0xED,0xC9,0x70,0x4C,0x4D,0xC7,0x52,0xCB,0x35,0x48,0x8E,0x55,0x9B,0xEF,0xCD,
0x31,0x2A,0x98,0x7B,0x8C,0x97,0xFA,0x69,0x2F,0x7C,0x6A,0x7A,0xE7,0x72,0xEF,0xE6,0x98,0x1A,0x2C,0xB5,
0x2A,0x56,0x62,0x32,0x48,0xF,0x58,0xAC,0xBE,0x9F,0xA2,0xE9,0x95,0xB3,0x63,0x3F,0xF4,0xB7,0x8D,0xEF,0xB1,0xFA,
0x87,0x8C,0x95,0x98,0xE1,0xF8,0x1A,0x43,0x4C,0x4D,0xC7,0x52,0xCB,0x35,0x48,0x8E,0x61,0x9,0x36,0xDC,
0x3B,0x5F,0xC5,0xEA,0x1F,0x32,0x96,0xA8,0xB7,0xF0,0xA5,0x96,0xC1,0x5,0xAC,0x37,0x6E,0x8D,0x39,0xA6,0x6,
0xC3,0x7B,0xC7,0x19,0x60,0x2D,0x0};
const char short_d8[]={0x55,0x4,0x49,0xA,0x9,0xCA,0x95,0xA4,0x5E,0x25,0x41,0xA8,0x10,};
#define NDIR 6
const room_code original_connections[RSIZE][NDIR]={
    {0,0,3,6,5,0,},
    {0,0,0,0,0,0,},
    {0,0,4,1,0,0,},
    {0,0,0,3,0,0,},
    {0,0,0,0,0,1,},
    {7,0,1,0,0,0,},
    {0,6,0,0,0,0,},
    {0,0,0,0,0,0,}
};
room world[RSIZE]={
    {1,long_d1,short_d1,{0,0,3,6,5,0,}},
    {2,long_d2,short_d2,{0,0,0,0,0,0,}},
    {3,long_d3,short_d3,{0,0,4,1,0,0,}},
    {4,long_d4,short_d4,{0,0,0,3,0,0,}},
    {5,long_d5,short_d5,{0,0,0,0,0,1,}},
    {6,long_d6,short_d6,{7,0,1,0,0,0,}},
    {7,long_d7,short_d7,{0,6,0,0,0,0,}},
    {8,long_d8,short_d8,{0,0,0,0,0,0,}}
};

const char areyousure[]={0xD9,0xFF,0x56,0x79,0x9B,0x3D,0xF3,0xCF,0xEA,0x24,0x2B,0xAF,0x6F,0x74,0x96,0xD3,0x3,0x97,0xFD,0x53,0xF3,0x79,0x91,0xB9,0xCA,0xEF,
0xE5,0x2};
const char exitrestart[]={0x74,0x5,0x3D,0x70,0xD9,0x3F,0x35,0x9F,0xA7,0xBD,0xCB,0xD2,0x50,0x8B,0x81,0x2B,0x57,0x6A,0x30,0xB9,0xF3,0x77,0xD3,
0xDE,0xBF,0xA7,0xF8,0x9A,0xB};
const char header[]={0x59,0xA1,0x6A,0x48,0xF,0xC,0xEE,0x34,0xBC,0x1A,0xD9,0x3F,0x9E,0x46,0xB9,0x49,0xF6,0xFF,0xE7,0x1E,0x59,0x2C,0xB5,0x2C,
0xCA,0x82,0x6C,0xCB,0xE5,0x52,0x13,};
const char headerdescription[]={0x14,0x51,0xFF,0x7B,0x58,0xC1,0xC,0x63,0x3F,0xEC,0x78,0x8A,0x81,0x39,0x96,0x85,0x52,0x13,};
const char message1[]={0x44,0xAC,0xEE,0xAF,0xD8,0xD1,0x4B,0xD4,0x30,0xF,0xB9,0x0};
const char message2[]={0x44,0xAC,0xEE,0xAF,0xD8,0xD1,0x43,0x7D,0x5F,0x91,0xB};
const char message3[]={0x44,0xAC,0xEE,0xAF,0xD8,0x8B,0xA1,0xFE,0xB7,0x3C,0xCF,0x5};
const char message4[]={0xD2,0xD4,0x30,0x25,0xE6,0x58,0xDD,0x5F,0xB1,0x44,0xBD,0xBD,0x6A,0xA8,0xDE,0x32,0x91,0x8E,0x4B,0xEF,0x1B,0xB9,
0xFF,0xE5,0x2};
const char message5[]={0x84,0xE6,0xD5,0xA6,0x23,0x17,};
const char message6[]={0x84,0xE6,0xD5,0xA6,0x63,0x8E,0x97,0x2,0xFF,0x16,0xBE,0x84,0xA7,0xE7,0xDE,0xC3,0xEA,0xB8,0x12,0xD6,0x2};
const char message7[]={0xC4,0xDB,0x3B,0xD6,0xE0,0x73,0xBF,0x69,0xAC,0xDA,0x3B,0x25,0x70,0xEF,0xCA,0xC,0xF7,0x4A,0xCC,0xFB,
0xF7,0x34,0x46,0xFE,0x28,0xB0,0x42,0xA9,0x6A,0xAF,0xBD,0x40,0x63,0xEF,0xE4,0xDA,0x23,0xC5,0xB8,0x79,0x75,0xBF,0xD7,
0xDC,0x43,0x4A,0x57,0xEE,0xDF,0xE0,0x8E,0x59,0xC2,0xB1,0x72,0x3E,0xC9,0xDF,0xDC,0x94,0x72,0x1};
const char message8[]={0xD2,0xD4,0x5B,0xEA,0x87,0xA1,0xBA,0x3A,0x20,0xF7,0x2A,0x33,0x61,0x75,0x15,0xF4,0xC2,0xA7,0xA6,0x77,0x2E,0x9F,0x6A,
0x2F,0xCF,0x73,0x1};
const char message9[]={0xD2,0xF7,0x13,0x35,0xA6,0x1F,0x73,0xAC,0x6,0xE9,0x1,0x8B,0xFD,0xB0,0xCF,0xC1,0xA5,0x67,0x78,0x4D,0x92,0xA7,
0xDA,0xCB,0xF3,0x5C,0x0};
const char message10[]={0x52,0x4E,0x35,0xE6,0x58,0x6D,0x58,0xB1,0x72,0xEE,0x98,0xF6,0x4F,0x81,0xF1,0xF9,0x32,0x4D,0xA7,0xCE,0x47,
0xC4,0xB4,0x7F,0xA,0xEC,0xC5,0x90,0xD2,0x71,0xB9,0x7D,0xD4,0x51,0x20,0x1F,0xEB,0xE5,0x2};
const char message11[]={0x84,0xE6,0xE9,0x6F,0x3B,0xC6,0xC6,0x1D,0x2B,0x31,0xA3,0xE1,0x97,0xB};
const char message12[]={0x84,0xE6,0xD9,0x57,0x62,0x6C,0xDC,0xB1,0x12,0x7B,0xF5,0xA5,0x80,0x5F,0x2E,0x0};
const char message14[]={0x44,0x4C,0xFB,0xA7,0xC0,0x8E,0xDE,0xAB,0x8F,0x15,0xB9,0x0};
const char message15[]={0x44,0x4C,0xFB,0xA7,0xC0,0x8E,0x1E,0x52,0xBA,0x87,0x5C,0x0};
const char message16[]={0x44,0x1A,0xB6,0x1D,0xAF,0xF7,0x8C,0x4F,0x36,0xBF,0x57,0x22,0x9D,0x95,0x11,0x24,0x8,0xB3,0xCC,0x5A,0x49,0x32,0x5B,0xB2,0x62,0x84,0xA,0xE2,
0x32,0xAA,0x24,0x21,0x2D,0x61,0x2D,0x0};
const char message18[]={0x55,0xBE,0x4,0x1B,0xEE,0x3D,0x6E,0xDE,0xD1,0x7B,0xE7,0xE,0xED,0x5C,0x0};
const char message19[]={0x55,0xBE,0x4,0x1B,0xEE,0x3D,0x6E,0x1E,0x15,0xAB,0xFE,0x41,0x7A,0x5C,0x2E,0x0};
const char message20[]={0x84,0xE6,0x51,0x11,0x73,0xEC,0xD5,0x28,0xC8,0x5};
const char message21[]={0x84,0xE6,0x5,0x97,0x7E,0x2F,0xE6,0x58,0x6A,0x55,0xAC,0xC4,0x64,0x90,0x1E,0xC8,0x5};
const char message22[]={0x52,0x9A,0x35,0xF6,0x8C,0x2F,0xC1,0x86,0x7B,0xEF,0xA6,0x31,0xD8,0x76,0xC4,0xE0,0xAB,0x23,0xA5,0xF6,
0x9E,0xFE,0x56,0xED,0x65,0x9A,0xFE,0xB1,0x2,0x5F,0xC2,0xD3,0x73,0x6F,0x8B,0x19,0x3E,0x2E,0xAD,0x31,0xC4,
0xD4,0x74,0x2C,0xB5,0x2C,0x87,0x87,0x36,0xC7,0xF8,0xDC,0xB1,0x1A,0xAA,0x86,0xF4,0xC0,0xCA,0xF9,0x64,0xA8,
0x6,0x77,0x2E,0x0};
const char message23[]={0x84,0xE6,0x5,0x97,0x7E,0x2F,0xE6,0xF4,0xB9,0xDC,0x2};
const char message30[]={0x19,0x1B,0xF8,0xD,0xB6,0x1D,0xAF,0xAD,0xA};
const char message31[]={0x19,0x1B,0xF8,0x2D,0xC1,0x86,0x7B,0x5B,0x15,};
const char message33[]={0x95,0x18,0xB3,0x3B,0xDD,0x32,0xFB,0xEB,0xED,0x87,0x5C,0xDD,0x72,0x35,0xC6,0xE7,0x7E,0xB3,0x23,0x5,0x83,0x33,0x9C,
0x15,0x4A,0x96,0xED,0x5,0xDA,0xB3,0x94,0x43,0xA9,0xD6,0xA3,0xDC,0xF6,0x4D,0x63,0x4F,0x11,0x63,0xBC,0xD4,0x5C,0x8E,0x4B,
0xEF,0x47,0x66,0x18,0xED,0x95,0x73,0xC7,0x3E,0x32,0x64,0xC0,0x8C,0xC,0x86,0x55,0x4A,0x2};
const char message34[]={0x96,0xC7,0x1A,0x2B,0x17,0xAB,0xF1,0x5E,0xC,0xEE,0x37,0x35,0xB7,0x57,0xC3,0xFD,0x76,0x65,0x86,0x31,
0xBB,0xD3,0xAD,0xDA,0xFC,0xEA,0xFB,0x18,0xF9,0xA3,0xC0,0xA,0xA5,0x8A,0x94,0x5A,0xC3,0x7A,0x52,0x9D,0x2A,0xF4,0xBC,0xC7,0xE7,
0x7E,0x7B,0x47,0xFE,0xD3,0x5B,0x39,0x5F,0xC2,0xD3,0x73,0xEF,0xD5,0xF7,0xC7,0xCD,0xBB,0xF7,0xEE,0xBF,
0x58,0xFD,0xEF,0x1D,0x2B,0xB4,0x17,0xBC,0x77,0xDF,0x8E,0xC,0xD1,0xD6,0x94,0xF2,0x51,0x36,0xB7,0xD7,0x5E,0xA0,0xB1,0xD4,
0xBF,0x36,0x7E,0xAC,0x31,0x8D,0xBD,0xD4,0x5F,0xC1,0xBD,0xCC,0xE0,0x1E,0xDC,0x6F,0xEF,0xC8,0x7F,0x7A,
0xBB,0x69,0xEC,0x7,0x27,0x6A,0x98,0xD2,0xDC,0xB,0x9E,0x61,0x2C,0x9D,0x3B,0xF2,0x49,0xC7,0xA8,0x88,0xC9,0xF7,
0x5E,0x4F,0x7F,0xD7,0x75,0xEF,0xCA,0xA8,0x88,0x65,0xC2,0x3D,0xB4,0x27,0xC7,0xBB,0xF,0xF9,0x58,0xCF,0x5A,0x0};
const char message35[]={0x55,0xBE,0x4,0x1B,0xEE,0xBD,0xA3,0x67,0xB8,0xF7,0x6A,0x3F,0x2E,0x51,0x7A,0x4F,0xE1,0xDE,0x7C,0xC3,
0x47,0x75,0x8F,0xA1,0xBD,0xFA,0xFE,0xEA,0xFE,0x8A,0x7F,0x23,0xCD,0xFD,0x1F,0xF7,0x63,0xA9,0xE5,0x9B,0x5E,0x2E,0x0};
const char message1000[]={0x12,0x59,0x82,0xCA,0x73,0x1};
const char message1001[]={0x19,0x41,0xB5,0x73,0x1};
const char message1002[]={0x19,0x41,0xB5,0x73,0x1};
const char message1003[]={0x15,0xF4,0xF4,0x77,0x5D,0xF7,0xEA,0x7B,0x60,0x3D,0x6B,0x1};
const char message1004[]={0x15,0xF4,0xF4,0x77,0x5D,0xF7,0xC8,0xF,0x2E,0xB7,0x82,0xC9,0xE0,0x23,0xC9,0xC0,0x3F,0x6B,0x1};
const char message1005[]={0x84,0xE6,0xBD,0x98,0x6C,0xDA,0x3E,0x6B,0x1};
const char message1006[]={0x84,0xE6,0x79,0xCF,0xBE,0xD2,0x2B,0x18,0xDF,0x7B,0x86,0xB1,0x1A,0x5F,0xCF,0x5A,0x0};
const char message1007[]={0x84,0xE6,0xA5,0x9B,0xD3,0xD4,0x5E,0x6A,0x9E,0x7C,0xD6,0x2};
const char message1008[]={0x84,0xE6,0xD5,0xFD,0x5E,0xF,0x5C,0xF0,0x6F,0x5,0xAB,0xCC,0x9C,0x3B,0x56,0xE3,0xEB,0x59,0xB};
const char message1009[]={0x59,0xFF,0x91,0x6D,0x55,0x0};
const char message1010[]={0x84,0xE6,0xD5,0xFD,0x5E,0xE7,0x2};
const char message1011[]={0x52,0x5,0xE8,0xA5,0x9B,0xD3,0xD4,0x5E,0x6A,0x9E,0x7C,0xD6,0x2};
const char message1012[]={0xD2,0xFD,0xB0,0x72,0x76,0x2F,0x13,0xFF,0xAC,0xA};
const char message1013[]={0x15,0xF4,0xAA,0x4D,0xB4,0xC5,0xB8,0x79,0x2F,0x66,0x5F,0xB9,0xB1,0x71,0x47,0x2E,0x0};
const char message1014[]={0x59,0x86,0x58,0xC8,0x75,0x1C,0x9,0xED,0x9};
const char message1015[]={0x53,0xF3,0x39,0x56,0xDF,0xDF,0x7,0x49,0x86,0x61,0xF2,0xFE,0x4D,0x0};
const char message1016[]={0xAB,0xD,0x6B,0xE4,0x2};
const char message1018[]={0x55,0x5C,0xFA,0xBD,0x9E,0x0};
const char message1019[]={0xC4,0x5E,0x70,0xE9,0xF7,0x7A,0x64,0x80,0x16,};
const char message1020[]={0x59,0xFB,0xBD,0x1E,0xB8,0xE0,0xDF,0xEC,0xFB,0xAF,0xAD,0x4C,0x0};
const char message1021[]={0xDC,0xBF,0x8};
const char message1022[]={0xCF,0x14,0x1};
const char message1023[]={0xF7,0x54,0x0};
const char message1024[]={0x6D,0xDF,0x53,0x1};
const char message1025[]={0x70,0x6D,0x1};
const char message1026[]={0xD5,0x78,0xAF,0x5};
const char message1027[]={0xDC,0xBF,0xDC,0x53,0x1};
const char message1028[]={0xDC,0xBF,0xB4,0x7D,0x4F,0x5};
const char message1029[]={0xCF,0x94,0x7B,0x2A,0x0};
const char message1030[]={0xCF,0x94,0xB6,0xEF,0xA9,0x0};
const char message1031[]={0x59,0xFB,0xBD,0x9E,0x7D,0xE5,0xFE,0x59,0x99,0x0};
const char message1032[]={0xD2,0xCD,0x93,0x6F,0xD4,0xB6,0x32,0x1};
const char message1033[]={0x84,0xE6,0x51,0x7B,0x6C,0xDC,0xB1,0xD4,0x3C,0xF9,0x72,0x1};
const char message1035[]={0xD5,0x78,0xA,0x1};
const char* dir[6]={
    message1021,
    message1022,
    message1023,
    message1024,
    message1025,
    message1026};

const char desc_l1[]={0x86,0x31,0xED,0x9F,0x2,0x7B,0xF5,0xB1,0x42,0x0};
const char desc_l2[]={0x86,0x77,0x2E,0x9F,0x6A,0xB};
const char desc_l3[]={0x86,0xB1,0xD4,0xAA,0x58,0x89,0xC9,0x20,0x3D,0x20,0x0};
const char desc_l4[]={0x86,0xB1,0x57,0xA3,0x40,0x0};
const char desc_l5[]={0x86,0xB1,0x77,0xEE,0x10,};
const char desc_l6[]={0xE5,0xDC,0x6F,0xD5,0x3F,0x48,0x8F,0x13,};
const char desc_l7[]={0x86,0x97,0x60,0xC3,0xBD,0x5};
const char desc_l8[]={0x86,0x31,0xED,0x9F,0x2,0x43,0x4A,0xF7,0x20,0x0};
const int original_position[OSIZE]={
    5,0,0,2,4,4,3,0,};
object obj[OSIZE]={
    {1,desc_l1,5,0+ISNOTMOVABLE},
    {2,desc_l2,0,0+ISNOTMOVABLE+ISWEREABLE},
    {3,desc_l3,0,0+ISNOTMOVABLE+ISWEREABLE},
    {4,desc_l4,2,0+ISNOTMOVABLE},
    {5,desc_l5,4,0+ISNOTMOVABLE},
    {6,desc_l6,4,0+ISNOTMOVABLE},
    {7,desc_l7,3,0+ISNOTMOVABLE},
    {8,desc_l8,0,0+ISNOTMOVABLE}
};

room_code current_position;
room_code next_position;
boolean retv;
extern EFFSHORTINDEX ls;
extern char playerInput[];
boolean marker[129];
int counter[129];
object *odummy;

char *searchw(unsigned int w) FASTCALL;
boolean unwear(unsigned int o) FASTCALL;
void printnewline(void)
{
    writesameln("\n");
}

void printspace(void)
{
    writesameln(" ");
}

EFFSHORTINDEX search_object(unsigned int o) FASTCALL
{
    EFFSHORTINDEX idx;
    for(idx=0; idx<OSIZE;++idx)
        if(obj[idx].code==o)
            return idx;
    return 0;
}

object *search_object_p(unsigned int o) FASTCALL
{
    return &obj[search_object(o)];
}
EFFSHORTINDEX search_room(EFFSHORTINDEX r) FASTCALL
{
    for(cdummy=0; cdummy<RSIZE;++cdummy)
        if(world[cdummy].code==r)
            return cdummy;
    return 0;
}

void restart(void)
{
    EFFSHORTINDEX j;
    for(cdummy=1;cdummy<129;++cdummy){
        marker[cdummy]=0;
        counter[cdummy]=0;
    }
    for(j=0; j<RSIZE;++j)
        for(cdummy=0; cdummy<NDIR;++cdummy)
            world[j].directions[cdummy]=original_connections[j][cdummy];
    marker[124]=true;
    marker[121]=true;
    next_position=8;
    for(j=0; j<OSIZE;++j)
        obj[j].position=original_position[j];
}

void show_messagenlf(const char *m) FASTCALL
{
    boolean o;
    cpointer=0;
    bpointer=0;
    compressed=(char *)m;
    do{
        o=decode();
        writesameln(decompress_b);
    } while(o);
}

void show_message(const char *m) FASTCALL
{
    show_messagenlf(m);
    printnewline();
}

boolean are_you_sure(void)
{
    show_message(areyousure);
    GETS(playerInput,BUFFERSIZE);
    if(playerInput[0]=='Y' || playerInput[0]=='y') {
        return 1;
    }
    return 0;
}

#define inventory()\
{\
    boolean gs=false;\
    show_message(message1032);\
    for(cdummy = 0; cdummy<OSIZE; ++cdummy) {\
        dummy=obj[cdummy].position;\
        if(dummy==CARRIED||dummy==WEARED) {\
            gs=true;\
            evidence2();\
            show_messagenlf(obj[cdummy].desc);\
            end_evidence2();\
            normaltxt();\
            if(dummy==WEARED){\
                printspace();\
                show_messagenlf(message1018);\
            }\
            printnewline();\
        }\
    }\
    if(gs==false) show_message(message1033);\
}

void m_move(EFFSHORTINDEX dir) FASTCALL
{
    EFFSHORTINDEX p;
    p=cr->directions[dir];
    if(p) {
        next_position=p;
        marker[120]=false;
    } else 
        show_message(message1008);

}

boolean get(unsigned int o) FASTCALL\
{
    odummy=search_object_p(o);
    if(odummy->position!=current_position) {
        show_message(message1006);
    } else if((odummy->attributes&ISNOTMOVABLE)==0) {
        show_message(message1005);
    } else {
        odummy->position=CARRIED;
        return false;
    }
    return true;
}
boolean vov(unsigned int v1, unsigned int v2);
boolean vovn(unsigned int v1, unsigned int v2, unsigned int n);
boolean vovn100_0(EFFSHORTINDEX n) FASTCALL;
boolean non1(unsigned int n1, unsigned int n2);
void ok(void);
boolean check_verb_noun(unsigned int v, unsigned int n);
boolean cvn70(EFFSHORTINDEX n) FASTCALL;
boolean check_verb_actor(unsigned int v, ACTORTYPE n);
boolean check_verb75_actor(EFFSHORTINDEX n) FASTCALL;
boolean check_verb75_actor_available(EFFSHORTINDEX n) FASTCALL;
boolean check_verb70_actor(EFFSHORTINDEX n) FASTCALL;
boolean check_verb70_actor_available(EFFSHORTINDEX n) FASTCALL;
unsigned char ams(unsigned char  v, unsigned char n, char* m);
#ifdef CV_IS_A_FUNCTION
    boolean cv(unsigned char v) FASTCALL;
#else
    #define cv(v) verb==(v)
#endif
void sendallroom(unsigned int s) FASTCALL;
#ifdef CV_IS_A_FUNCTION
    unsigned int get_object_position(obj_code c) FASTCALL
    {
        return search_object_p(c)->position;
    }
    boolean object_is_here(obj_code c) FASTCALL
    {
        return get_object_position(c)==current_position;
    }
    boolean object_is_carried(obj_code c) FASTCALL
    {
        return get_object_position(c)==CARRIED;
    }
#else
    #define object_is_here(c) (search_object_p(c)->position==current_position)
    #define get_object_position(c) search_object_p(c)->position
    #define object_is_carried(c) (search_object_p(c)->position==CARRIED)
#endif
boolean object_is_available(obj_code c) FASTCALL
{
    return object_is_here(c)||object_is_carried(c);
}
void set_object_position(obj_code c, int pos)
{
    search_object_p(c)->position=pos;
}
void set_object_position0(obj_code c) FASTCALL
{
    set_object_position(c,0);
}
void set_object_positionC(obj_code c) FASTCALL
{
    set_object_position(c,CARRIED);
}
void bring_object_here(obj_code c) FASTCALL
{
    set_object_position(c,current_position);
}
void amsm(EFFSHORTINDEX p, EFFSHORTINDEX c, boolean v, const char *m);
boolean cvna(unsigned int v, unsigned int n, unsigned int o);
boolean cvna70(EFFSHORTINDEX n, EFFSHORTINDEX o);
boolean cvna70neq(EFFSHORTINDEX n) FASTCALL;
boolean drop(unsigned int o) FASTCALL
{
    odummy=search_object_p(o);\
    if(odummy->position==CARRIED){\
        odummy->position=current_position;\
        dummy=odummy->position;\
    } else {\
        show_message(message1007);\
        return true;\
    }\
    return false;\
}

void jump(EFFSHORTINDEX p) FASTCALL
{
    next_position=p;
    marker[120]=false;
}

void hold(unsigned int p) FASTCALL;
char iscarrsome(void);
char iswearsome(void);
#define checkexit()\
{\
    show_message(exitrestart);\
    GETS(playerInput,BUFFERSIZE);\
    if(playerInput[0]=='E' || playerInput[0]=='e'){\
        leave(); exit(0);\
    }\
}
char check_position_marker_on(unsigned int p, unsigned char f);
char check_position_marker_off(unsigned int p, unsigned char f);
void hi_cond(void)
{
    retv=true;
    // if res? 50 then set 50 rese 124 endif
    if(marker[50]==false) {
        marker[50]=true;
        marker[124]=false;
    }

    // IF at 8 AND res? 8 THEN set 8 goto 1 ENDIF
    if(current_position==8) if(marker[8]==false) {
        marker[8]=true;
        jump(1);
        return;
    }

    // if at 1 and res? 11 then mess 1 endif
    if(1) amsm(1,11,0,message1);

    // if at 1 and set? 11 then mess 2 endif
    if(1) amsm(1,11,1,message2);

    // if at 2 and res? 11 then mess 1 endif
    if(1) amsm(2,11,0,message1);

    // if at 2 and set? 11 then mess 2 endif
    if(1) amsm(2,11,1,message2);

    // if at 2 and carr 8 then set 122 endif
    if(current_position==2) if(object_is_carried(8)) {
        marker[122]=true;
    }

    // if at 2 and here 8 then set 122 endif
    if(current_position==2) if(object_is_here(8)) {
        marker[122]=true;
    }

    // if at 2 and notcarr 8 then rese 122 endif
    if(current_position==2) if(object_is_carried(8)==false) {
        marker[122]=false;
    }

    // if at 2 and nothere 8 then rese 122 endif
    if(current_position==2) if(object_is_here(8)==false) {
        marker[122]=false;
    }

    // IF carr 8 THEN set 122 ENDIF  ho la torcia accesa
    if(object_is_carried(8)) {
        marker[122]=true;
    }

    // IF res? 16 and ctreq 126 0 then cset 126 61 ENDIF  
    if(marker[16]==false) if(counter[126]==0) {
        counter[126]=61;
    }

    // IF res? 16 and ctreq 126 10 then mess 33 ENDIF  
    if(marker[16]==false) if(counter[126]==10) {
        show_message(message33);
    }

    // IF res? 16 and ctreq 126 1 then mess 34 quit ENDIF
    if(marker[16]==false) if(counter[126]==1) {
        show_message(message34);
        if(are_you_sure()) {
            leave(); exit(0);
        }
        return;
    }

    retv=false;    return;
}
void low_cond(void)
{
    retv=true;
    // if verb 40 then quit endif
    if(cv(40)) {
        if(are_you_sure()) {
            leave(); exit(0);
        }
        return;
    }

    // if verb 74 and noun 72 then inve wait endif
    if(check_verb_noun(74,72)) {
        inventory();
        return;
    }

    // if verb 0 and noun 72 then inve wait endif
    if(check_verb_noun(0,72)) {
        inventory();
        return;
    }

    // if verb 987 then restart endif
    if(verb==987) {
        if(are_you_sure())
            restart();
        return;
    }

    // if verb 988 then save wait endif salva la partita
    if(verb==988) {
        SAVE;
        return;
    }

    // if verb 989 then load wait endif carica la partita
    if(verb==989) {
        LOAD;
        return;
    }

    // if verb  80 then nord wait endif
    if(cv(80)) {
        m_move(0);
        return;
    }

    // if verb 81 then sud wait endif
    if(cv(81)) {
        m_move(1);
        return;
    }

    // if verb 82 then est wait endif
    if(cv(82)) {
        m_move(2);
        return;
    }

    // if verb 83 then ovest wait endif
    if(cv(83)) {
        m_move(3);
        return;
    }

    // if verb 84 then alto wait endif
    if(cv(84)) {
        m_move(4);
        return;
    }

    // if verb 85 then basso wait endif
    if(cv(85)) {
        m_move(5);
        return;
    }

    // if verb 110 then look wait endif
    if(cv(110)) {
        marker[120]=false;
        return;
    }

    // IF VERB 50 AND NO1LT 9 THEN GET NO1 OKAY ENDIF
    if(cv(50)) if((noun1>0&&noun1<9)) {
        if(get(noun1)) return;
        ok();
        return;
    }

    // IF VERB 55 AND NO1LT 9 THEN DROP NO1 OKAY ENDIF
    if(cv(55)) if((noun1>0&&noun1<9)) {
        if(drop(noun1)) return;
        ok();
        return;
    }

    // IF verb 110 AND noun 58 THEN mess 1009 WAIT ENDIF  GUARDA  PANCA
    if(check_verb_noun(110,58)) {
        show_message(message1009);
        return;
    }

    // IF verb 36 AND noun 59 THEN mess 1009 WAIT ENDIF  CERCA  PAGLIA
    if(check_verb_noun(36,59)) {
        show_message(message1009);
        return;
    }

    // IF verb 37 AND noun 1 THEN mess 1010 WAIT ENDIF  ACCENDI  TORCIA
    if(check_verb_noun(37,1)) {
        show_message(message1010);
        return;
    }

    // IF verb 38 AND noun 1 AND carr 8 AND res? 121 THEN swap 8 1 rese 122 look WAIT ENDIF  SPEGNI  TORCIA  
    if(check_verb_noun(38,1)) if(object_is_carried(8)) if(marker[121]==false) {
        dummy=get_object_position(8);
        search_object_p(8)->position=get_object_position(1);
        search_object_p(1)->position=dummy;
        marker[122]=false;
        marker[120]=false;
        return;
    }

    // IF VERB 38 AND NOUN 1 AND CARR 8 AND Set? 121 THEN SWAP 8 1 RESE 122 okay ENDIF  SPEGNI  TORCIA     SPEGNI  TORCIA  
    if(check_verb_noun(38,1)) if(object_is_carried(8)) if(marker[121]) {
        dummy=get_object_position(8);
        search_object_p(8)->position=get_object_position(1);
        search_object_p(1)->position=dummy;
        marker[122]=false;
        ok();
        return;
    }

    // IF VERB 38 AND NOUN 1 AND CARR 1 THEN mess 14 WAIT ENDIF  SPEGNI  TORCIA     SPEGNI  TORCIA  
    if(check_verb_noun(38,1)) if(object_is_carried(1)) {
        show_message(message14);
        return;
    }

    // IF VERB 38 AND NOUN 1 THEN MESS 1010 WAIT ENDIF  SPEGNI  TORCIA     SPEGNI  TORCIA     SPEGNI  TORCIA     SPEGNI  TORCIA
    if(check_verb_noun(38,1)) {
        show_message(message1010);
        return;
    }

    // IF VERB 70 AND NOUN 61 THEN MESS 30 WAIT ENDIF  LEGGI  AVVISO     LEGGI  AVVISO
    if(cvn70(61)) {
        show_message(message30);
        return;
    }

    // IF verb 100 AND noun 7 THEN mess 31 WAIT ENDIF  MONTA  CAVALLO
    if(check_verb_noun(100,7)) {
        show_message(message31);
        return;
    }

    // IF verb 70 AND noun 7 THEN mess 31 WAIT ENDIF  ESAMINA  CAVALLO
    if(cvn70(7)) {
        show_message(message31);
        return;
    }

    // IF verb 115 AND noun 2 AND carr 2 THEN wear 2 okay ENDIF  INDOSSA  ELMETTO  
    if(check_verb_noun(115,2)) if(object_is_carried(2)) {
        dummy=search_object(2);
        odummy=&obj[dummy];
        if((odummy->attributes&ISWEREABLE)!=0&&(odummy->position==CARRIED||odummy->position==current_position)){
            odummy->position=WEARED;
            ++counter[118];
        } else if(odummy->position==WEARED) {
            show_message(message1019);
            return;
        } else {
            show_message(message1010);
            return;
        }
        ok();
        return;
    }

    // IF VERB 115 AND NOUN 3 AND CARR 3 THEN WEAR 3 OKAY ENDIF  INDOSSA  ELMETTO     INDOSSA  COTTA DI MAGLI
    if(check_verb_noun(115,3)) if(object_is_carried(3)) {
        dummy=search_object(3);
        odummy=&obj[dummy];
        if((odummy->attributes&ISWEREABLE)!=0&&(odummy->position==CARRIED||odummy->position==current_position)){
            odummy->position=WEARED;
            ++counter[118];
        } else if(odummy->position==WEARED) {
            show_message(message1019);
            return;
        } else {
            show_message(message1010);
            return;
        }
        ok();
        return;
    }

    retv=false;
    return;
}
void local_cond(void)
{
    retv=true;
    switch(current_position) {
    case 1:
    // IF verb 81 and RES? 11 THEN  MESS 5 MESS 1 WAIT ENDIF
    if(cv(81)) if(marker[11]==false) {
        show_message(message5);
        show_message(message1);
        return;
    }

    // IF verb 81 AND set? 11 THEN rese 121 goto 2 WAIT ENDIF  SUD
    if(cv(81)) if(marker[11]) {
        marker[121]=false;
        jump(2);
        return;
    }

    // IF verb 112 AND noun 114 AND res? 11 THEN set 11  mess 3 WAIT ENDIF  APRI  PORTA
    if(check_verb_noun(112,114)) if(marker[11]==false) {
        marker[11]=true;
        show_message(message3);
        return;
    }

    // IF verb 113 AND noun 114 AND set? 11 THEN rese 11 mess 4 WAIT ENDIF    APRI  PORTA  CHIUDI  PORTA
    if(check_verb_noun(113,114)) if(marker[11]) {
        marker[11]=false;
        show_message(message4);
        return;
    }

    break;
    case 2:
    // IF verb 80 AND set? 11 THEN set 121 goto 1 WAIT ENDIF  NORD
    if(cv(80)) if(marker[11]) {
        marker[121]=true;
        jump(1);
        return;
    }

    // IF verb 112 AND noun 114 AND res? 11 THEN set 11  mess 3 WAIT ENDIF  APRI  PORTA
    if(check_verb_noun(112,114)) if(marker[11]==false) {
        marker[11]=true;
        show_message(message3);
        return;
    }

    // IF verb 113 AND noun 114 AND set? 11 THEN rese 11 mess 4 WAIT ENDIF    APRI  PORTA  CHIUDI  PORTA
    if(check_verb_noun(113,114)) if(marker[11]) {
        marker[11]=false;
        show_message(message4);
        return;
    }

    break;
    case 3:
    // IF verb 36 AND noun 59 AND res? 13 THEN mess 9 brin 3 set 13 WAIT ENDIF  CERCA  PAGLIA
    if(check_verb_noun(36,59)) if(marker[13]==false) {
        show_message(message9);
        bring_object_here(3);
        marker[13]=true;
        return;
    }

    // IF verb 36 AND noun 59 AND set? 13 THEN mess 11 WAIT ENDIF  CERCA  PAGLIA
    if(check_verb_noun(36,59)) if(marker[13]) {
        show_message(message11);
        return;
    }

    // IF verb 100 and noun 7 and ISNOTWEARING 2 THEN MESS 23 WAIT ENDIF
    if(check_verb_noun(100,7)) if(get_object_position(2)!=WEARED) {
        show_message(message23);
        return;
    }

    // IF verb 100 and noun 7 and isnotwearing 3 THEN mess 21 WAIT ENDIF
    if(check_verb_noun(100,7)) if(get_object_position(3)!=WEARED) {
        show_message(message21);
        return;
    }

    // IF verb 100 and noun 7 and notcarr 4 THEN mess 20 WAIT ENDIF
    if(check_verb_noun(100,7)) if(object_is_carried(4)==false) {
        show_message(message20);
        return;
    }

    // IF verb 100 and noun 7 and res? 14 THEN mess 18 WAIT ENDIF
    if(check_verb_noun(100,7)) if(marker[14]==false) {
        show_message(message18);
        return;
    }

    // IF verb 100 and noun 7 and res? 15 THEN mess 19 WAIT ENDIF
    if(check_verb_noun(100,7)) if(marker[15]==false) {
        show_message(message19);
        return;
    }

    // IF verb 100 and noun 7 THEN set 16 mess 22 quit ENDIF
    if(check_verb_noun(100,7)) {
        marker[16]=true;
        show_message(message22);
        if(are_you_sure()) {
            leave(); exit(0);
        }
        return;
    }

    // IF verb 39 AND noun 5 AND  no2eq 7 AND carr 5 THEN set 14 to 5 8 okay ENDIF  metti SELLA  CAVALLO
    if(check_verb_noun(39,5)) if(noun2==7) if(object_is_carried(5)) {
        marker[14]=true;
        set_object_position(5,8);
        ok();
        return;
    }

    // IF verb 39 AND noun 6 AND no2eq 7 AND carr 6 THEN set 15 to 6 8 okay ENDIF  METTI  BRIGLIE  CAVALLO
    if(check_verb_noun(39,6)) if(noun2==7) if(object_is_carried(6)) {
        marker[15]=true;
        set_object_position(6,8);
        ok();
        return;
    }

    // IF verb 70 AND noun 7 THEN mess 35 ENDIF
    if(cvn70(7)) {
        show_message(message35);
    }

    // IF res? 14 THEN mess 18 ENDIF
    if(marker[14]==false) {
        show_message(message18);
    }

    // IF res? 15 THEN mess 19 ENDIF
    if(marker[15]==false) {
        show_message(message19);
    }

    // IF verb 70 AND noun 7 THEN wait ENDIF
    if(cvn70(7)) {
        return;
    }

    break;
    case 7:
    // IF verb 110 AND noun 58 AND adve 75 AND res? 12 THEN mess 8 brin 2 WAIT ENDIF  GUARDA  PANCA  SOTTO
    if(check_verb_noun(110,58)) if(adve==75) if(marker[12]==false) {
        show_message(message8);
        bring_object_here(2);
        return;
    }

    // IF verb 110 AND noun 58 AND res? 12 THEN mess 8 brin 2 WAIT ENDIF  GUARDA  PANCA  SOTTO
    if(check_verb_noun(110,58)) if(marker[12]==false) {
        show_message(message8);
        bring_object_here(2);
        return;
    }

    // IF verb 37 AND noun 1 AND carr 8 THEN mess 15 WAIT ENDIF  ACCENDI  TORCIA
    if(check_verb_noun(37,1)) if(object_is_carried(8)) {
        show_message(message15);
        return;
    }

    // IF verb 37 AND noun 1 AND carr 1 THEN mess 10 swap 1 8 WAIT ENDIF  ACCENDI  TORCIA
    if(check_verb_noun(37,1)) if(object_is_carried(1)) {
        show_message(message10);
        dummy=get_object_position(1);
        search_object_p(1)->position=get_object_position(8);
        search_object_p(8)->position=dummy;
        return;
    }

    // IF verb 70 AND noun 61 THEN mess 16 WAIT ENDIF  LEGGI  AVVISO
    if(cvn70(61)) {
        show_message(message16);
        return;
    }

    }
    retv=false;    return;
}

void game_cycle(void)
{
    unsigned char k;
    boolean ve,pa;
    while(1){
        current_position=next_position;
        if(marker[120]==false&&(marker[121]||marker[122])) {
            printnewline();
            evidence1();
            cr=&world[search_room(current_position)];
            show_messagenlf(cr->short_d);
            printspace();
            end_evidence1();
            normaltxt();
            printspace();
            show_message(cr->long_d);
            printnewline();
            marker[120]=true;
            ve=false;
            for(k=0;k<OSIZE;++k)
                if(obj[k].position==current_position) {
                    if(ve==false) {
                        show_message(message1031);
                        ve=true;
                        evidence2();
                    }
                    show_message(obj[k].desc);
                }
            end_evidence2();
            normaltxt();
            if(marker[124]) {
                pa=false;
                for(k=0; k<NDIR; ++k)
                    if(cr->directions[k]) {
                        if(pa==false) {
                            show_messagenlf(message1020);
                            pa=true;
                        }
                    evidence3();
                    show_messagenlf(dir[k]);
                    printspace();
                    end_evidence3();
                }
                normaltxt();
                printnewline();
            }
        }
        hi_cond();
        if(retv) continue;
        printnewline();
        if(ls==0 && counter[125]<5) show_message(message1012);
        interrogationAndAnalysis();
        local_cond();
        if(retv) continue;
        low_cond();
        if(retv) continue;
        show_message(cv(0)?message1009:message1010);
    }
}

int main(void)
{
    restart();
    init_term();
    evidence2();
    show_message(header);
    show_message(headerdescription);
    end_evidence2();
    normaltxt();
    waitkey();
    game_cycle();
    return 0;
}
#ifdef CV_IS_A_FUNCTION
boolean cv(unsigned char v) FASTCALL
{
    return verb==v;
}
#endif
void ok(void)
{
        show_message(message1000);
}
boolean check_verb_noun(unsigned int v, unsigned int n)
{
    return verb==v&&noun1==n;
}
boolean cvn70(EFFSHORTINDEX n) FASTCALL
{
    return check_verb_noun(70,n);
}
void amsm(EFFSHORTINDEX p, EFFSHORTINDEX c, boolean v, const char *m)
{
    if(current_position==p&&marker[c]==v) show_message(m);
}
